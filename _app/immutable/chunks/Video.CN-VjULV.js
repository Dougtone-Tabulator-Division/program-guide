const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./prod.BqNzwKl4.js","./preload-helper.C1FmrZbK.js","./vidstack-audio.gBKlHO2m.js","./vidstack-CSv7rfHP.CbEMn0UX.js","./vidstack-DSYpsFWk.DZ1MEfIH.js","./vidstack-video.CiIesUZ1.js","./vidstack-hls.D9uMRbzY.js","./vidstack-dash.Dufw8HMr.js","./vidstack-vimeo.vAf2QalG.js","./vidstack-BSPPDWLF.BCnlvhOh.js","./vidstack-krOAtKMi.C3UUF7YD.js","./vidstack-youtube.BjHdGGme.js","./vidstack-Zc3I7oOd.CA6XwpqT.js","./vidstack-kV1-bfkY.BkKCqHaY.js"])))=>i.map(i=>d[i]);
var El=Object.defineProperty;var sr=i=>{throw TypeError(i)};var Sl=(i,s,t)=>s in i?El(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t;var g=(i,s,t)=>Sl(i,typeof s!="symbol"?s+"":s,t),ki=(i,s,t)=>s.has(i)||sr("Cannot "+t);var r=(i,s,t)=>(ki(i,s,"read from private field"),t?t.call(i):s.get(i)),d=(i,s,t)=>s.has(i)?sr("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(i):s.set(i,t),h=(i,s,t,e)=>(ki(i,s,"write to private field"),e?e.call(i,t):s.set(i,t),t),o=(i,s,t)=>(ki(i,s,"access private method"),t);import{s as Pl,J as ir,i as Vr,n as nr,f as ms,k as ql,x as Cl,e as vi,c as Ei,b as Si,a4 as de,P as rr,m as Al,h as ar,r as or,v as Ll,y as Il}from"./scheduler.Bh2TjGwV.js";import{S as xl,i as Ol}from"./index.TvtXsUKR.js";import{_ as mt}from"./preload-helper.C1FmrZbK.js";import{t as Ml}from"./tv-state.D_n5rjyU.js";import{g as lr}from"./audio-mixer.WFKbhp0N.js";const Yt=Symbol(0);let ai=!1,xi=!1,vt=null,Ne=null,ft=null,lt=0,De=[],On={};const _l=()=>{},ds=0,Nr=1,oi=2,wi=3;function Rl(){ai=!0,queueMicrotask(Fr)}function Fr(){if(!De.length){ai=!1;return}xi=!0;for(let i=0;i<De.length;i++)De[i].$st!==ds&&Dl(De[i]);De=[],ai=!1,xi=!1}function Dl(i){let s=[i];for(;i=i[Yt];)i.$e&&i.$st!==ds&&s.push(i);for(let t=s.length-1;t>=0;t--)Fn(s[t])}function Vl(i){const s=Oi();return Ks(s,i.length?i.bind(null,cs.bind(s)):i,null)}function T(i){return Ks(vt,i,null)}function vs(i){return Ks(null,i,null)}function Es(){xi||Fr()}function Hr(){return vt}function Ct(i,s){try{return Ks(s,i,null)}catch(t){Mn(s,t);return}}function Nl(i,s=vt){return s==null?void 0:s.$cx[i]}function Fl(i,s,t=vt){t&&(t.$cx={...t.$cx,[i]:s})}function et(i){if(!i||!vt)return i||_l;const s=vt;return s.$d?Array.isArray(s.$d)?s.$d.push(i):s.$d=[s.$d,i]:s.$d=i,function(){s.$st!==wi&&(i.call(null),Nn(s.$d)?s.$d=null:Array.isArray(s.$d)&&s.$d.splice(s.$d.indexOf(i),1))}}function cs(i=!0){if(this.$st!==wi){if(this.$h)if(Array.isArray(this.$h))for(let s=this.$h.length-1;s>=0;s--)cs.call(this.$h[s]);else cs.call(this.$h);if(i){const s=this[Yt];s&&(Array.isArray(s.$h)?s.$h.splice(s.$h.indexOf(this),1):s.$h=null),Hl(this)}}}function Hl(i){i.$st=wi,i.$d&&Ur(i),i.$s&&Mi(i,0),i[Yt]=null,i.$s=null,i.$o=null,i.$h=null,i.$cx=On,i.$eh=null}function Ur(i){try{if(Array.isArray(i.$d))for(let s=i.$d.length-1;s>=0;s--){const t=i.$d[s];t.call(t)}else i.$d.call(i.$d);i.$d=null}catch(s){Mn(i,s)}}function Ks(i,s,t){const e=vt,n=Ne;vt=i,Ne=t;try{return s.call(i)}finally{vt=e,Ne=n}}function Mn(i,s){if(!i||!i.$eh)throw s;let t=0,e=i.$eh.length,n=s;for(t=0;t<e;t++)try{i.$eh[t](n);break}catch(a){n=a}if(t===e)throw n}function _n(){return this.$st===wi?this.$v:(Ne&&!this.$e&&(!ft&&Ne.$s&&Ne.$s[lt]==this?lt++:ft?ft.push(this):ft=[this]),this.$c&&Fn(this),this.$v)}function Gr(i){const s=Nn(i)?i(this.$v):i;if(this.$ch(this.$v,s)&&(this.$v=s,this.$o))for(let t=0;t<this.$o.length;t++)Qr(this.$o[t],oi);return this.$v}const Rn=function(){this[Yt]=null,this.$h=null,vt&&vt.append(this)},Me=Rn.prototype;Me.$cx=On;Me.$eh=null;Me.$c=null;Me.$d=null;Me.append=function(i){i[Yt]=this,this.$h?Array.isArray(this.$h)?this.$h.push(i):this.$h=[this.$h,i]:this.$h=i,i.$cx=i.$cx===On?this.$cx:{...this.$cx,...i.$cx},this.$eh&&(i.$eh=i.$eh?[...i.$eh,...this.$eh]:this.$eh)};Me.dispose=function(){cs.call(this)};function Oi(){return new Rn}const Kr=function(s,t,e){Rn.call(this),this.$st=t?oi:ds,this.$i=!1,this.$e=!1,this.$s=null,this.$o=null,this.$v=s,t&&(this.$c=t),e&&e.dirty&&(this.$ch=e.dirty)},Dn=Kr.prototype;Object.setPrototypeOf(Dn,Me);Dn.$ch=Ul;Dn.call=_n;function Vn(i,s,t){return new Kr(i,s,t)}function Ul(i,s){return i!==s}function Nn(i){return typeof i=="function"}function Fn(i){if(i.$st===Nr)for(let s=0;s<i.$s.length&&(Fn(i.$s[s]),i.$st!==oi);s++);i.$st===oi?jr(i):i.$st=ds}function Gl(i){i.$h&&cs.call(i,!1),i.$d&&Ur(i),i.$eh=i[Yt]?i[Yt].$eh:null}function jr(i){let s=ft,t=lt;ft=null,lt=0;try{Gl(i);const e=Ks(i,i.$c,i);cr(i),!i.$e&&i.$i?Gr.call(i,e):(i.$v=e,i.$i=!0)}catch(e){cr(i),Mn(i,e)}finally{ft=s,lt=t,i.$st=ds}}function cr(i){if(ft){if(i.$s&&Mi(i,lt),i.$s&&lt>0){i.$s.length=lt+ft.length;for(let t=0;t<ft.length;t++)i.$s[lt+t]=ft[t]}else i.$s=ft;let s;for(let t=lt;t<i.$s.length;t++)s=i.$s[t],s.$o?s.$o.push(i):s.$o=[i]}else i.$s&&lt<i.$s.length&&(Mi(i,lt),i.$s.length=lt)}function Qr(i,s){if(!(i.$st>=s)&&(i.$e&&i.$st===ds&&(De.push(i),ai||Rl()),i.$st=s,i.$o))for(let t=0;t<i.$o.length;t++)Qr(i.$o[t],Nr)}function Mi(i,s){let t,e;for(let n=s;n<i.$s.length;n++)t=i.$s[n],t.$o&&(e=t.$o.indexOf(i),t.$o[e]=t.$o[t.$o.length-1],t.$o.pop())}function li(...i){}function Hn(i){return i===null}function At(i){return typeof i>"u"}function ah(i){return Hn(i)||At(i)}function oh(i){return(i==null?void 0:i.constructor)===Object}function Ss(i){return typeof i=="number"&&!Number.isNaN(i)}function _(i){return typeof i=="string"}function lh(i){return typeof i=="boolean"}function le(i){return typeof i=="function"}function $t(i){return Array.isArray(i)}const Kl=Event,Br=Symbol("DOM_EVENT");var Cr,Ar;class N extends(Ar=Kl,Cr=Br,Ar){constructor(t,...e){var a,l;super(t,e[0]);g(this,Cr,!0);g(this,"detail");g(this,"triggers",new jl);this.detail=(a=e[0])==null?void 0:a.detail;const n=(l=e[0])==null?void 0:l.trigger;n&&this.triggers.add(n)}get trigger(){return this.triggers.source}get originEvent(){return this.triggers.origin}get isOriginTrusted(){var t;return((t=this.triggers.origin)==null?void 0:t.isTrusted)??!1}}class jl{constructor(){g(this,"chain",[])}get source(){return this.chain[0]}get origin(){return this.chain[this.chain.length-1]}add(s){this.chain.push(s),Ql(s)&&this.chain.push(...s.triggers)}remove(s){return this.chain.splice(this.chain.indexOf(s),1)[0]}has(s){return this.chain.some(t=>t===s)}hasType(s){return!!this.findType(s)}findType(s){return this.chain.find(t=>t.type===s)}walk(s){for(const t of this.chain){const e=s(t);if(e)return[t,e]}}[Symbol.iterator](){return this.chain.values()}}function Ql(i){return!!(i!=null&&i[Br])}class Wr extends EventTarget{constructor(){super(...arguments);g(this,"$ts__events")}addEventListener(t,e,n){return super.addEventListener(t,e,n)}removeEventListener(t,e,n){return super.removeEventListener(t,e,n)}}function us(i,s,t,e){return i.addEventListener(s,t,e),et(()=>i.removeEventListener(s,t,e))}var Fe,He;class ct{constructor(s){d(this,Fe);d(this,He);h(this,Fe,s),h(this,He,new AbortController),et(this.abort.bind(this))}get signal(){return r(this,He).signal}add(s,t,e){if(this.signal.aborted)throw Error("aborted");return r(this,Fe).addEventListener(s,t,{...e,signal:e!=null&&e.signal?Bl(this.signal,e.signal):this.signal}),this}remove(s,t){return r(this,Fe).removeEventListener(s,t),this}abort(s){r(this,He).abort(s)}}Fe=new WeakMap,He=new WeakMap;function Bl(...i){const s=new AbortController,t={signal:s.signal};function e(n){s.abort(n.target.reason)}for(const n of i){if(n.aborted){s.abort(n.reason);break}n.addEventListener("abort",e,t)}return s.signal}function Wl(i){return!!(i!=null&&i.type.startsWith("touch"))}function Yr(i){return!!(i!=null&&i.type.startsWith("key"))}function Yl(i){return Yr(i)&&(i.key==="Enter"||i.key===" ")}function X(i,s,t){if(i)if(!t&&t!==""&&t!==0)i.removeAttribute(s);else{const e=t===!0?"":t+"";i.getAttribute(s)!==e&&i.setAttribute(s,e)}else return}function hs(i,s,t){if(i)!t&&t!==0?i.style.removeProperty(s):i.style.setProperty(s,t+"");else return}function tt(i,s){const t=Vn(i,null,s),e=_n.bind(t);return e[Yt]=!0,e.set=Gr.bind(t),e}function Ps(i,s){const t=Vn(s==null?void 0:s.initial,i,s),e=_n.bind(t);return e[Yt]=!0,e}function zl(i,s){const t=Vn(null,function(){let n=i();return Nn(n)&&et(n),null},void 0);return t.$e=!0,jr(t),cs.bind(t,!0)}const $=zl;function Xl(i){return{id:Symbol(),provide:i}}function zr(i,s,t=Hr()){var n;const e=!At(s);Fl(i.id,e?s:(n=i.provide)==null?void 0:n.call(i),t)}function Jl(i){return Nl(i.id)}const ws=Symbol(0),Ts=Symbol(0),Xr=Symbol(0),Pi={};var Lr,Ue,Ge,me,Ke,Lt,Jr,Zr,ta,ea;Lr=Xr;class Zl{constructor(s,t,e){d(this,Lt);g(this,"$ts__events");g(this,"$ts__vars");g(this,Lr,null);g(this,"$el",tt(null));g(this,"el",null);g(this,"scope",null);g(this,"attachScope",null);g(this,"connectScope",null);g(this,"component",null);g(this,"destroyed",!1);g(this,"props",Pi);g(this,"attrs",null);g(this,"styles",null);g(this,"state");g(this,"$state");d(this,Ue,[]);d(this,Ge,[]);d(this,me,[]);d(this,Ke,[]);var l;this.scope=t,e!=null&&e.scope&&e.scope.append(t);let n=s.state,a=s.props;if(n&&(this.$state=n.create(),this.state=new Proxy(this.$state,{get:(u,c)=>this.$state[c]()}),zr(n,this.$state)),a&&(this.props=tc(a),e!=null&&e.props))for(const u of Object.keys(e.props))(l=this.props[u])==null||l.set(e.props[u]);et(this.destroy.bind(this))}setup(){Ct(()=>{for(const s of r(this,Ue))s()},this.scope)}attach(s){this.el||(this.el=s,this.$el.set(s),Ct(()=>{this.attachScope=Oi(),Ct(()=>{for(const t of r(this,Ge))t(this.el);o(this,Lt,Jr).call(this),o(this,Lt,Zr).call(this)},this.attachScope)},this.scope),s.dispatchEvent(new Event("attached")))}detach(){var s;(s=this.attachScope)==null||s.dispose(),this.attachScope=null,this.connectScope=null,this.el=null,this.$el.set(null)}connect(){!this.el||!this.attachScope||!r(this,me).length||Ct(()=>{this.connectScope=Oi(),Ct(()=>{for(const s of r(this,me))s(this.el)},this.connectScope)},this.attachScope)}disconnect(){var s;(s=this.connectScope)==null||s.dispose(),this.connectScope=null}destroy(){if(this.destroyed)return;this.destroyed=!0,Ct(()=>{for(const t of r(this,Ke))t(this.el)},this.scope);const s=this.el;this.detach(),this.scope.dispose(),r(this,Ue).length=0,r(this,Ge).length=0,r(this,me).length=0,r(this,Ke).length=0,this.component=null,this.attrs=null,this.styles=null,this.props=Pi,this.scope=null,this.state=Pi,this.$state=null,s&&delete s.$}addHooks(s){s.onSetup&&r(this,Ue).push(s.onSetup.bind(s)),s.onAttach&&r(this,Ge).push(s.onAttach.bind(s)),s.onConnect&&r(this,me).push(s.onConnect.bind(s)),s.onDestroy&&r(this,Ke).push(s.onDestroy.bind(s))}}Ue=new WeakMap,Ge=new WeakMap,me=new WeakMap,Ke=new WeakMap,Lt=new WeakSet,Jr=function(){if(this.attrs)for(const s of Object.keys(this.attrs))le(this.attrs[s])?$(o(this,Lt,ta).bind(this,s)):X(this.el,s,this.attrs[s])},Zr=function(){if(this.styles)for(const s of Object.keys(this.styles))le(this.styles[s])?$(o(this,Lt,ea).bind(this,s)):hs(this.el,s,this.styles[s])},ta=function(s){X(this.el,s,this.attrs[s].call(this.component))},ea=function(s){hs(this.el,s,this.styles[s].call(this.component))};function tc(i){const s={};for(const t of Object.keys(i)){const e=i[t];s[t]=tt(e,e)}return s}let $s={$$:null};function ec(i,s){return Vl(()=>{$s.$$=new Zl(i,Hr(),s);const t=new i;return $s.$$.component=t,$s.$$=null,t})}class js extends EventTarget{constructor(){super();g(this,"$$");$s.$$&&this.attach($s)}get el(){return this.$$.el}get $el(){return this.$$.$el()}get scope(){return this.$$.scope}get attachScope(){return this.$$.attachScope}get connectScope(){return this.$$.connectScope}get $props(){return this.$$.props}get $state(){return this.$$.$state}get state(){return this.$$.state}attach({$$:t}){return this.$$=t,t.addHooks(this),this}addEventListener(t,e,n){this.listen(t,e,n)}removeEventListener(t,e,n){var a;(a=this.el)==null||a.removeEventListener(t,e,n)}setAttributes(t){this.$$.attrs||(this.$$.attrs={}),Object.assign(this.$$.attrs,t)}setStyles(t){this.$$.styles||(this.$$.styles={}),Object.assign(this.$$.styles,t)}setCSSVars(t){this.setStyles(t)}createEvent(t,...e){return new N(t,e[0])}dispatch(t,...e){if(!this.el)return!1;const n=t instanceof Event?t:new N(t,e[0]);return Object.defineProperty(n,"target",{get:()=>this.$$.component}),vs(()=>{var a,l;return(l=(a=this.$$)[Xr])==null||l.call(a,n),this.el.dispatchEvent(n)})}dispatchEvent(t){return this.dispatch(t)}listen(t,e,n){return this.el?us(this.el,t,e,n):li}}class Un extends js{subscribe(s){return Ct(()=>$(()=>s(this.state)),this.$$.scope)}destroy(){this.$$.destroy()}}function J(i,s,t){i[ws]||(i[ws]=new Set),i[ws].add(s)}function dt(i,s,t){i[Ts]||(i[Ts]=new Set),i[Ts].add(s)}var je;class sa{constructor(s){g(this,"id",Symbol(0));g(this,"record");d(this,je);this.record=s,h(this,je,Object.getOwnPropertyDescriptors(s))}create(){const s={},t=new Proxy(s,{get:(e,n)=>s[n]()});for(const e of Object.keys(this.record)){const n=r(this,je)[e].get;s[e]=n?Ps(n.bind(t)):tt(this.record[e])}return s}reset(s,t){for(const e of Object.keys(s))!r(this,je)[e].get&&(!t||t(e))&&s[e].set(this.record[e])}}je=new WeakMap;function sc(i,s){for(const t of i)t(s)}function ia(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ic(i){return i.charAt(0).toUpperCase()+i.slice(1)}function ch(i){return Object.keys(i)}function _i(){let i,s;return{promise:new Promise((e,n)=>{i=e,s=n}),resolve:i,reject:s}}function nc(i){return new Promise(s=>setTimeout(s,i))}function na(i){let s=-1,t;function e(...n){t=n,!(s>=0)&&(s=window.requestAnimationFrame(()=>{i.apply(this,t),s=-1,t=void 0}))}return e}const rc=typeof window<"u"?"requestIdleCallback"in window?window.requestIdleCallback:i=>window.setTimeout(i,1):li;function ac(i,s){return new Promise(t=>{rc(e=>{i==null||i(e),t()},s)})}var nt={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},ur=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],hr=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],dr=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],it=typeof window<"u"&&typeof window.document<"u"?window.document:{},pt="fullscreenEnabled"in it&&Object.keys(nt)||ur[0]in it&&ur||hr[0]in it&&hr||dr[0]in it&&dr||[],xe={requestFullscreen:function(i){return i[pt[nt.requestFullscreen]]()},requestFullscreenFunction:function(i){return i[pt[nt.requestFullscreen]]},get exitFullscreen(){return it[pt[nt.exitFullscreen]].bind(it)},get fullscreenPseudoClass(){return":"+pt[nt.fullscreen]},addEventListener:function(i,s,t){return it.addEventListener(pt[nt[i]],s,t)},removeEventListener:function(i,s,t){return it.removeEventListener(pt[nt[i]],s,t)},get fullscreenEnabled(){return!!it[pt[nt.fullscreenEnabled]]},set fullscreenEnabled(i){},get fullscreenElement(){return it[pt[nt.fullscreenElement]]},set fullscreenElement(i){},get onfullscreenchange(){return it[("on"+pt[nt.fullscreenchange]).toLowerCase()]},set onfullscreenchange(i){return it[("on"+pt[nt.fullscreenchange]).toLowerCase()]=i},get onfullscreenerror(){return it[("on"+pt[nt.fullscreenerror]).toLowerCase()]},set onfullscreenerror(i){return it[("on"+pt[nt.fullscreenerror]).toLowerCase()]=i}},ra=oc;function oc(i,s,t){var e=null,n=null,a=t&&t.leading,l=t&&t.trailing;a==null&&(a=!0),l==null&&(l=!a),a==!0&&(l=!1);var u=function(){e&&(clearTimeout(e),e=null)},c=function(){var f=n;u(),f&&f()},p=function(){var f=a&&!e,y=this,w=arguments;if(n=function(){return i.apply(y,w)},e||(e=setTimeout(function(){if(e=null,l)return n()},s)),f)return f=!1,n()};return p.cancel=u,p.flush=c,p}var aa=lc;function lc(i,s,t){var e=null,n=null,a=function(){e&&(clearTimeout(e),n=null,e=null)},l=function(){var c=n;a(),c&&c()},u=function(){if(!s)return i.apply(this,arguments);var c=this,p=arguments,f=t&&!e;if(a(),n=function(){i.apply(c,p)},e=setTimeout(function(){if(e=null,!f){var y=n;return n=null,y()}},s),f)return n()};return u.cancel=a,u.flush=l,u}const qi=i=>i===null?"":i+"",cc=i=>i===null?null:i+"",uc=i=>i===null?0:Number(i),hc=i=>i!==null,dc=()=>null,pc=i=>i===null?[]:JSON.parse(i),fc=i=>i===null?{}:JSON.parse(i);function mc(i){if(i===null)return cc;switch(typeof i){case"undefined":return qi;case"string":return qi;case"boolean":return hc;case"number":return uc;case"function":return dc;case"object":return $t(i)?pc:fc;default:return qi}}const zt=Symbol(0),oa=Symbol(0),Oe=Symbol(0),fe=Symbol(0);var Wt;(function(i){i[i.Idle=0]="Idle";const t=1;i[i.Pending=t]="Pending";const e=2;i[i.Ready=e]="Ready"})(Wt||(Wt={}));function la(i,s){var e,n,a;class t extends i{constructor(...c){super(...c);g(this,"$");g(this,n,Wt.Idle);g(this,e,null);g(this,"keepAlive",!1);g(this,"forwardKeepAlive",!0);if(this.$=Ct(()=>ec(s),null),this.$.$$.addHooks(this),s.props){const p=this.$props,f=Object.getOwnPropertyDescriptors(this);for(const y of Object.keys(f))y in s.props&&(p[y].set(this[y]),delete this[y])}}static get observedAttributes(){var c;if(!this[zt]&&s.props){const p=new Map;for(const f of Object.keys(s.props)){let y=(c=this.attrs)==null?void 0:c[f],w=_(y)?y:y&&(y==null?void 0:y.attr);w!==!1&&(w||(w=ia(f)),p.set(w,{prop:f,converter:y&&!_(y)&&(y==null?void 0:y.converter)||mc(s.props[f])}))}this[zt]=p}return this[zt]?Array.from(this[zt].keys()):[]}get scope(){return this.$.$$.scope}get attachScope(){return this.$.$$.attachScope}get connectScope(){return this.$.$$.connectScope}get $props(){return this.$.$$.props}get $state(){return this.$.$$.$state}get state(){return this.$.state}attributeChangedCallback(c,p,f){var L;const y=this.constructor;if(!y[zt]){(L=super.attributeChangedCallback)==null||L.call(this,c,p,f);return}const w=y[zt].get(c);w&&(this[w.prop]=w.converter(f))}connectedCallback(){var f;const c=(f=this.$)==null?void 0:f.$$;if(!c||c.destroyed)return;if(this[Oe]!==Wt.Ready){gc.call(this);return}if(!this.isConnected)return;this.hasAttribute("keep-alive")&&(this.keepAlive=!0),c.connect(),$t(this[fe])&&sc(this[fe],this),this[fe]=null;const p=super.connectedCallback;p&&Ct(()=>p.call(this),this.connectScope)}disconnectedCallback(){var f;const c=(f=this.$)==null?void 0:f.$$;if(!c||c.destroyed)return;c.disconnect();const p=super.disconnectedCallback;p&&p.call(this),!this.keepAlive&&!this.hasAttribute("keep-alive")&&setTimeout(()=>{requestAnimationFrame(()=>{this.isConnected||c.destroy()})},0)}[(a=zt,n=Oe,e=fe,oa)](){const c=this.$.$$,p=this.constructor;if(c.destroyed)return;const f=p[zt];if(f)for(const y of this.attributes){let w=f.get(y.name);w&&w.converter&&c.props[w.prop].set(w.converter(this.getAttribute(y.name)))}c.setup(),c.attach(this),this[Oe]=Wt.Ready,this.connectedCallback()}subscribe(c){return this.$.subscribe(c)}destroy(){this.disconnectedCallback(),this.$.destroy()}}return g(t,"attrs"),g(t,a,null),yc(t,s),t}function yc(i,s){const t=i.prototype,e=s.prototype;if(s.props)for(const n of Object.keys(s.props))Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get(){return this.$props[n]()},set(a){this.$props[n].set(a)}});if(e[ws])for(const n of e[ws])Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get(){return this.$[n]},set(a){this.$[n]=a}});if(e[Ts])for(const n of e[Ts])t[n]=function(...a){return this.$[n](...a)}}function gc(){if(this[Oe]!==Wt.Idle)return;this[Oe]=Wt.Pending;const i=wc(this),s=i&&window.customElements.get(i.localName),t=i&&i[Oe]===Wt.Ready;if(i&&(!s||!t)){bc.call(this,i);return}ca.call(this,i)}async function bc(i){await window.customElements.whenDefined(i.localName),i[Oe]!==Wt.Ready&&await new Promise(s=>(i[fe]??(i[fe]=[])).push(s)),ca.call(this,i)}function ca(i){if(this.isConnected){if(i){i.keepAlive&&i.forwardKeepAlive&&(this.keepAlive=!0,this.setAttribute("keep-alive",""));const s=this.$.$$.scope;s&&i.$.$$.attachScope.append(s)}this[oa]()}}function wc(i){let s=i.parentNode,t=i.localName.split("-",1)[0]+"-";for(;s;){if(s.nodeType===1&&s.localName.startsWith(t))return s;s=s.parentNode}return null}function ua(i,s=!1){(s||!window.customElements.get(i.tagName))&&window.customElements.define(i.tagName,i)}var uh='<path fill-rule="evenodd" clip-rule="evenodd" d="M6 7C5.63181 7 5.33333 7.29848 5.33333 7.66667V14.8667C5.33333 14.9403 5.39361 14.9999 5.46724 15.0009C10.8844 15.0719 15.2614 19.449 15.3325 24.8661C15.3334 24.9397 15.393 25 15.4667 25H26C26.3682 25 26.6667 24.7015 26.6667 24.3333V7.66667C26.6667 7.29848 26.3682 7 26 7H6ZM17.0119 22.2294C17.0263 22.29 17.0802 22.3333 17.1425 22.3333H23.3333C23.7015 22.3333 24 22.0349 24 21.6667V10.3333C24 9.96514 23.7015 9.66667 23.3333 9.66667H8.66667C8.29848 9.66667 8 9.96514 8 10.3333V13.1909C8 13.2531 8.04332 13.3071 8.10392 13.3214C12.5063 14.3618 15.9715 17.827 17.0119 22.2294Z" fill="currentColor"/> <path d="M13.2 25C13.2736 25 13.3334 24.9398 13.3322 24.8661C13.2615 20.5544 9.77889 17.0718 5.46718 17.0011C5.39356 16.9999 5.33333 17.0597 5.33333 17.1333V18.8667C5.33333 18.9403 5.39348 18.9999 5.4671 19.0015C8.67465 19.0716 11.2617 21.6587 11.3319 24.8662C11.3335 24.9399 11.393 25 11.4667 25H13.2Z" fill="currentColor"/> <path d="M5.33333 21.1333C5.33333 21.0597 5.39332 20.9998 5.46692 21.0022C7.57033 21.0712 9.26217 22.763 9.33114 24.8664C9.33356 24.94 9.27364 25 9.2 25H6C5.63181 25 5.33333 24.7015 5.33333 24.3333V21.1333Z" fill="currentColor"/>';const ha=Xl();function da(){return Jl(ha)}const Tc=(navigator==null?void 0:navigator.userAgent.toLowerCase())||"",pa=/iphone|ipad|ipod|ios|crios|fxios/i.test(Tc),fa=/(iphone|ipod)/gi.test((navigator==null?void 0:navigator.platform)||""),$c=!!window.chrome,hh=!!window.safari||pa;function ma(){return kc()&&le(screen.orientation.unlock)}function kc(){return!At(window.screen.orientation)&&!At(window.screen.orientation.lock)}function vc(i,s){return i||(i=document.createElement("audio")),i.canPlayType(s).length>0}function Ec(i,s){return i||(i=document.createElement("video")),i.canPlayType(s).length>0}function Sc(i){return i||(i=document.createElement("video")),i.canPlayType("application/vnd.apple.mpegurl").length>0}function dh(i){return!!document.pictureInPictureEnabled&&!(i!=null&&i.disablePictureInPicture)}function ph(i){return le(i==null?void 0:i.webkitSupportsPresentationMode)&&le(i==null?void 0:i.webkitSetPresentationMode)}async function Pc(){const i=document.createElement("video");return i.volume=.5,await nc(0),i.volume===.5}function qc(){return(window==null?void 0:window.ManagedMediaSource)??(window==null?void 0:window.MediaSource)??(window==null?void 0:window.WebKitMediaSource)}function Cc(){return(window==null?void 0:window.SourceBuffer)??(window==null?void 0:window.WebKitSourceBuffer)}function Gn(){const i=qc();if(At(i))return!1;const s=i&&le(i.isTypeSupported)&&i.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=Cc(),e=At(t)||!At(t.prototype)&&le(t.prototype.appendBuffer)&&le(t.prototype.remove);return!!s&&!!e}function Ac(){return Gn()}const Lc=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx|flac)($|\?)/i,Ic=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp3","audio/webm","audio/flac","audio/m4a","audio/m4b","audio/mp4a"]),xc=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,Oc=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),Mc=/\.(m3u8)($|\?)/i,_c=/\.(mpd)($|\?)/i,Rc=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]),Dc=new Set(["application/dash+xml"]);function ya({src:i,type:s}){return _(i)?Lc.test(i)||Ic.has(s)||i.startsWith("blob:")&&s==="audio/object":s==="audio/object"}function ga(i){return _(i.src)?xc.test(i.src)||Oc.has(i.type)||i.src.startsWith("blob:")&&i.type==="video/object"||Qs(i)&&Sc():i.type==="video/object"}function Qs({src:i,type:s}){return _(i)&&Mc.test(i)||Rc.has(s)}function Kn({src:i,type:s}){return _(i)&&_c.test(i)||Dc.has(s)}function Vc(i){return _(i.src)&&(ya(i)||ga(i)||Qs(i))}function fh(i){return typeof window.MediaStream<"u"&&i instanceof window.MediaStream}var _t;class Zs{constructor(s,t){d(this,_t);$t(s)?h(this,_t,s):!At(s)&&!At(t)?h(this,_t,[[s,t]]):h(this,_t,[])}get length(){return r(this,_t).length}start(s){return r(this,_t)[s][0]??1/0}end(s){return r(this,_t)[s][1]??1/0}}_t=new WeakMap;function pr(i){if(!i.length)return null;let s=i.start(0);for(let t=1;t<i.length;t++){const e=i.start(t);e<s&&(s=e)}return s}function ks(i){if(!i.length)return null;let s=i.end(0);for(let t=1;t<i.length;t++){const e=i.end(t);e>s&&(s=e)}return s}function Nc(i){if(i.length<=1)return i;i.sort((e,n)=>e[0]-n[0]);let s=[],t=i[0];for(let e=1;e<i.length;e++){const n=i[e];t[1]>=n[0]-1?t=[t[0],Math.max(t[1],n[1])]:(s.push(t),t=n)}return s.push(t),s}function Fc(i,s,t){let e=s[0],n=s[1];return t<e?[t,-1]:t===e?s:e===-1?(s[0]=t,s):(t>e&&(s[1]=t,n===-1&&i.push(s)),Nc(i),s)}function mh(i,s){const t=new URLSearchParams;for(const e of Object.keys(s))t.set(e,s[e]+"");return i+"?"+t.toString()}function Ti(i,s="preconnect"){const t=document.querySelector(`link[href="${i}"]`);if(!Hn(t))return!0;const e=document.createElement("link");return e.rel=s,e.href=i,e.crossOrigin="true",document.head.append(e),!0}const zs={};function yh(i){if(zs[i])return zs[i].promise;const s=_i(),t=document.querySelector(`script[src="${i}"]`);if(!Hn(t))return s.resolve(),s.promise;const e=document.createElement("script");return e.src=i,e.onload=()=>{s.resolve(),delete zs[i]},e.onerror=()=>{s.reject(),delete zs[i]},setTimeout(()=>document.head.append(e),0),s.promise}function ti(i){return i==="use-credentials"?"include":_(i)?"same-origin":void 0}function fr(i,s){return s>=i.startTime&&s<i.endTime}const Hc=Symbol(0),Uc=Symbol(0),Gc=Symbol(0),Kc=Symbol(0),jc=Symbol(0),Qc=Symbol(0),Bc=Symbol(0),E={crossOrigin:Hc,readyState:Uc,updateActiveCues:Gc,canLoad:Kc,onModeChange:jc,native:Qc,nativeHLS:Bc};var Ir,xr,Or,Mr,qs,Rt,ye,Cs,ge,B,Dt,G,ba,Ri,ys,Di,Vi,Ni;class ci extends Wr{constructor(t){super();d(this,G);g(this,"src");g(this,"content");g(this,"type");g(this,"encoding");g(this,"id","");g(this,"label","");g(this,"language","");g(this,"kind");g(this,"default",!1);d(this,qs,!1);d(this,Rt,0);d(this,ye,"disabled");d(this,Cs,{});d(this,ge,[]);d(this,B,[]);d(this,Dt,[]);g(this,Mr,0);g(this,Or);g(this,xr,null);g(this,Ir,null);for(const e of Object.keys(t))this[e]=t[e];this.type||(this.type="vtt"),t.content?o(this,G,ba).call(this,t):t.src||(this[E.readyState]=2)}static createId(t){return`vds-${t.type}-${t.kind}-${t.src??t.label??"?"}`}get metadata(){return r(this,Cs)}get regions(){return r(this,ge)}get cues(){return r(this,B)}get activeCues(){return r(this,Dt)}get readyState(){return this[E.readyState]}get mode(){return r(this,ye)}set mode(t){this.setMode(t)}addCue(t,e){var l;let n=0,a=r(this,B).length;for(n=0;n<a&&!(t.endTime<=r(this,B)[n].startTime);n++);n===a?r(this,B).push(t):r(this,B).splice(n,0,t),t instanceof TextTrackCue||(l=this[E.native])==null||l.track.addCue(t),this.dispatchEvent(new N("add-cue",{detail:t,trigger:e})),fr(t,r(this,Rt))&&this[E.updateActiveCues](r(this,Rt),e)}removeCue(t,e){var a;const n=r(this,B).indexOf(t);if(n>=0){const l=r(this,Dt).includes(t);r(this,B).splice(n,1),(a=this[E.native])==null||a.track.removeCue(t),this.dispatchEvent(new N("remove-cue",{detail:t,trigger:e})),l&&this[E.updateActiveCues](r(this,Rt),e)}}setMode(t,e){var n;r(this,ye)!==t&&(h(this,ye,t),t==="disabled"?(h(this,Dt,[]),o(this,G,Ni).call(this)):this.readyState===2?this[E.updateActiveCues](r(this,Rt),e):o(this,G,Ri).call(this),this.dispatchEvent(new N("mode-change",{detail:this,trigger:e})),(n=this[E.onModeChange])==null||n.call(this))}[(Mr=E.readyState,Or=E.crossOrigin,xr=E.onModeChange,Ir=E.native,E.updateActiveCues)](t,e){if(h(this,Rt,t),this.mode==="disabled"||!r(this,B).length)return;const n=[];for(let l=0,u=r(this,B).length;l<u;l++){const c=r(this,B)[l];fr(c,t)&&n.push(c)}let a=n.length!==r(this,Dt).length;if(!a){for(let l=0;l<n.length;l++)if(!r(this,Dt).includes(n[l])){a=!0;break}}h(this,Dt,n),a&&o(this,G,Ni).call(this,e)}[E.canLoad](){h(this,qs,!0),r(this,ye)!=="disabled"&&o(this,G,Ri).call(this)}}qs=new WeakMap,Rt=new WeakMap,ye=new WeakMap,Cs=new WeakMap,ge=new WeakMap,B=new WeakMap,Dt=new WeakMap,G=new WeakSet,ba=function(t){mt(async()=>{const{parseText:e,VTTCue:n,VTTRegion:a}=await import("./prod.BqNzwKl4.js").then(l=>l.d);return{parseText:e,VTTCue:n,VTTRegion:a}},__vite__mapDeps([0,1]),import.meta.url).then(({parseText:e,VTTCue:n,VTTRegion:a})=>{!_(t.content)||t.type==="json"?(o(this,G,Vi).call(this,t.content,n,a),this.readyState!==3&&o(this,G,ys).call(this)):e(t.content,{type:t.type}).then(({cues:l,regions:u})=>{h(this,B,l),h(this,ge,u),o(this,G,ys).call(this)})})},Ri=async function(){var t,e;if(!(!r(this,qs)||this[E.readyState]>0)){if(this[E.readyState]=1,this.dispatchEvent(new N("load-start")),!this.src){o(this,G,ys).call(this);return}try{const{parseResponse:n,VTTCue:a,VTTRegion:l}=await mt(async()=>{const{parseResponse:p,VTTCue:f,VTTRegion:y}=await import("./prod.BqNzwKl4.js").then(w=>w.d);return{parseResponse:p,VTTCue:f,VTTRegion:y}},__vite__mapDeps([0,1]),import.meta.url),u=(t=this[E.crossOrigin])==null?void 0:t.call(this),c=fetch(this.src,{headers:this.type==="json"?{"Content-Type":"application/json"}:void 0,credentials:ti(u)});if(this.type==="json")o(this,G,Vi).call(this,await(await c).text(),a,l);else{const{errors:p,metadata:f,regions:y,cues:w}=await n(c,{type:this.type,encoding:this.encoding});if(((e=p[0])==null?void 0:e.code)===0)throw p[0];h(this,Cs,f),h(this,ge,y),h(this,B,w)}o(this,G,ys).call(this)}catch(n){o(this,G,Di).call(this,n)}}},ys=function(){if(this[E.readyState]=2,!this.src||this.type!=="vtt"){const e=this[E.native];if(e&&!e.managed)for(const n of r(this,B))e.track.addCue(n)}const t=new N("load");this[E.updateActiveCues](r(this,Rt),t),this.dispatchEvent(t)},Di=function(t){this[E.readyState]=3,this.dispatchEvent(new N("error",{detail:t}))},Vi=function(t,e,n){try{const{regions:a,cues:l}=Yc(t,e,n);h(this,ge,a),h(this,B,l)}catch(a){o(this,G,Di).call(this,a)}},Ni=function(t){this.dispatchEvent(new N("cue-change",{trigger:t}))};const Wc=/captions|subtitles/;function kt(i){return Wc.test(i.kind)}function Yc(i,s,t){const e=_(i)?JSON.parse(i):i;let n=[],a=[];return e.regions&&t&&(n=e.regions.map(l=>Object.assign(new t,l))),(e.cues||$t(e))&&(a=($t(e)?e:e.cues).filter(l=>Ss(l.startTime)&&Ss(l.endTime)).map(l=>Object.assign(new s(0,0,""),l))),{regions:n,cues:a}}const zc=Symbol(0),Xc=Symbol(0),Jc=Symbol(0),Zc=Symbol(0),tu=Symbol(0),eu=Symbol(0),su=Symbol(0),iu=Symbol(0),nu=Symbol(0),O={add:zc,remove:Xc,reset:Jc,select:Zc,readonly:tu,setReadonly:eu,onReset:su,onRemove:iu,onUserSelect:nu},ru=Symbol(0),au=Symbol(0),gt={setAuto:ru,enableAuto:au};function Ci(i){return i instanceof Error?i:Error(typeof i=="string"?i:JSON.stringify(i))}const ou=new Set;{let i=function(){for(const s of ou)try{s()}catch{}window.requestAnimationFrame(i)};i()}function mr(i,s,t){i.hasAttribute(s)||i.setAttribute(s,t)}function lu(i){return Wl(i)&&(i.touches.length>1||i.changedTouches.length>1)}function gh(i){const s=document.createElement("template");return s.innerHTML=i,s.content}function bh(i){return i.cloneNode(!0).firstElementChild}function cu(i){return i instanceof HTMLElement}function wh(i){var s;return((s=String(i).split(".")[1])==null?void 0:s.length)??0}function uu(i,s,t){return Math.max(i,Math.min(t,s))}let Fi=tt(!1);us(document,"pointerdown",()=>{Fi.set(!1)}),us(document,"keydown",i=>{i.metaKey||i.altKey||i.ctrlKey||Fi.set(!0)});var Jt,It,wa,Ta,$a,ka;class hu extends js{constructor(){super(...arguments);d(this,It);d(this,Jt,tt(!1))}onConnect(t){$(()=>{const e=new ct(t);if(!Fi()){r(this,Jt).set(!1),Xs(t,!1),e.add("pointerenter",o(this,It,$a).bind(this)).add("pointerleave",o(this,It,ka).bind(this));return}const n=document.activeElement===t;r(this,Jt).set(n),Xs(t,n),e.add("focus",o(this,It,wa).bind(this)).add("blur",o(this,It,Ta).bind(this))})}focused(){return r(this,Jt).call(this)}}Jt=new WeakMap,It=new WeakSet,wa=function(){r(this,Jt).set(!0),Xs(this.el,!0)},Ta=function(){r(this,Jt).set(!1),Xs(this.el,!1)},$a=function(){yr(this.el,!0)},ka=function(){yr(this.el,!1)};function Xs(i,s){X(i,"data-focus",s),X(i,"data-hocus",s)}function yr(i,s){X(i,"data-hocus",s),X(i,"data-hover",s)}var _r;class va extends Wr{constructor(){super(...arguments);g(this,"items",[]);g(this,_r,!1)}get length(){return this.items.length}get readonly(){return this[O.readonly]}indexOf(t){return this.items.indexOf(t)}getById(t){return t===""?null:this.items.find(e=>e.id===t)??null}toArray(){return[...this.items]}[(_r=O.readonly,Symbol.iterator)](){return this.items.values()}[O.add](t,e){const n=this.items.length;""+n in this||Object.defineProperty(this,n,{get(){return this.items[n]}}),!this.items.includes(t)&&(this.items.push(t),this.dispatchEvent(new N("add",{detail:t,trigger:e})))}[O.remove](t,e){var a;const n=this.items.indexOf(t);n>=0&&((a=this[O.onRemove])==null||a.call(this,t,e),this.items.splice(n,1),this.dispatchEvent(new N("remove",{detail:t,trigger:e})))}[O.reset](t){var e;for(const n of[...this.items])this[O.remove](n,t);this.items=[],this[O.setReadonly](!1,t),(e=this[O.onReset])==null||e.call(this)}[O.setReadonly](t,e){this[O.readonly]!==t&&(this[O.readonly]=t,this.dispatchEvent(new N("readonly-change",{detail:t,trigger:e})))}}const Hi=xe.fullscreenEnabled;var Zt,Qe,ce,Ea,Sa,Pa;class du extends js{constructor(){super(...arguments);d(this,ce);d(this,Zt,!1);d(this,Qe,!1)}get active(){return r(this,Qe)}get supported(){return Hi}onConnect(){new ct(xe).add("fullscreenchange",o(this,ce,Sa).bind(this)).add("fullscreenerror",o(this,ce,Pa).bind(this)),et(o(this,ce,Ea).bind(this))}async enter(){try{return h(this,Zt,!0),!this.el||Ai(this.el)?void 0:(gr(),xe.requestFullscreen(this.el))}catch(t){throw h(this,Zt,!1),t}}async exit(){if(!(!this.el||!Ai(this.el)))return gr(),xe.exitFullscreen()}}Zt=new WeakMap,Qe=new WeakMap,ce=new WeakSet,Ea=async function(){Hi&&await this.exit()},Sa=function(t){const e=Ai(this.el);e!==r(this,Qe)&&(e||h(this,Zt,!1),h(this,Qe,e),this.dispatch("fullscreen-change",{detail:e,trigger:t}))},Pa=function(t){r(this,Zt)&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),h(this,Zt,!1))};function Ai(i){if(xe.fullscreenElement===i)return!0;try{return i.matches(xe.fullscreenPseudoClass)}catch{return!1}}function gr(){if(!Hi)throw Error("[vidstack] no fullscreen API")}var te,Vt,be,ut,qa,Ui,Gi,Ki;const pi=class pi extends js{constructor(){super(...arguments);d(this,ut);d(this,te,tt(o(this,ut,Ki).call(this)));d(this,Vt,tt(!1));d(this,be)}get type(){return r(this,te).call(this)}get locked(){return r(this,Vt).call(this)}get portrait(){return r(this,te).call(this).startsWith("portrait")}get landscape(){return r(this,te).call(this).startsWith("landscape")}get supported(){return pi.supported}onConnect(){if(this.supported)us(screen.orientation,"change",o(this,ut,Ui).bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=o(this,ut,Ui).bind(this),et(()=>t.onchange=null)}et(o(this,ut,qa).bind(this))}async lock(t){T(r(this,Vt))||r(this,be)===t||(o(this,ut,Gi).call(this),await screen.orientation.lock(t),r(this,Vt).set(!0),h(this,be,t))}async unlock(){T(r(this,Vt))&&(o(this,ut,Gi).call(this),h(this,be,void 0),await screen.orientation.unlock(),r(this,Vt).set(!1))}};te=new WeakMap,Vt=new WeakMap,be=new WeakMap,ut=new WeakSet,qa=async function(){this.supported&&r(this,Vt).call(this)&&await this.unlock()},Ui=function(t){r(this,te).set(o(this,ut,Ki).call(this)),this.dispatch("orientation-change",{detail:{orientation:T(r(this,te)),lock:r(this,be)},trigger:t})},Gi=function(){if(!this.supported)throw Error("[vidstack] no orientation API")},Ki=function(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"},g(pi,"supported",ma());let ui=pi;function ji(i){return!_(i)&&"width"in i&&"height"in i&&Ss(i.width)&&Ss(i.height)}const Ca=new sa({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new Zs,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:ma(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return fa&&this.mediaType==="video"&&(!this.playsInline||!xe.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new Zs,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new Zs,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(kt).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get realDuration(){return this.providedDuration>0?this.providedDuration:this.intrinsicDuration},get duration(){return this.clipEndTime>0?this.clipEndTime-this.clipStartTime:Math.max(0,this.realDuration-this.clipStartTime)},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){const i=pr(this.buffered)??0;return Math.max(0,i-this.clipStartTime)},get bufferedEnd(){const i=ks(this.buffered)??0;return Math.min(this.duration,Math.max(0,i-this.clipStartTime))},get seekableStart(){const i=pr(this.seekable)??0;return Math.max(0,Math.abs(i-this.clipStartTime))},get seekableEnd(){const i=this.canPlay?ks(this.seekable)??1/0:0;return this.clipEndTime>0?Math.max(this.clipEndTime,Math.max(0,i-this.clipStartTime)):i},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.realDuration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,savedState:null}),Aa=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),pu=new Set([...Aa,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function br(i,s=!1){const t=s?Aa:pu;Ca.reset(i,e=>t.has(e)),Es()}var we,at,Be,fi,I,M,mu;class fu{constructor(s=void 0){d(this,I);d(this,we,null);d(this,at,null);d(this,Be,-1);d(this,fi);h(this,fi,s)}setTarget(s){h(this,we,s)}getPlayer(s){var t;return r(this,at)?r(this,at):((t=s??r(this,we))==null||t.dispatchEvent(new N("find-media-player",{detail:e=>void h(this,at,e),bubbles:!0,composed:!0})),r(this,at))}setPlayer(s){h(this,at,s)}startLoading(s){o(this,I,M).call(this,"media-start-loading",s)}startLoadingPoster(s){o(this,I,M).call(this,"media-poster-start-loading",s)}requestAirPlay(s){o(this,I,M).call(this,"media-airplay-request",s)}requestGoogleCast(s){o(this,I,M).call(this,"media-google-cast-request",s)}play(s){o(this,I,M).call(this,"media-play-request",s)}pause(s){o(this,I,M).call(this,"media-pause-request",s)}mute(s){o(this,I,M).call(this,"media-mute-request",s)}unmute(s){o(this,I,M).call(this,"media-unmute-request",s)}enterFullscreen(s,t){o(this,I,M).call(this,"media-enter-fullscreen-request",t,s)}exitFullscreen(s,t){o(this,I,M).call(this,"media-exit-fullscreen-request",t,s)}lockScreenOrientation(s,t){o(this,I,M).call(this,"media-orientation-lock-request",t,s)}unlockScreenOrientation(s){o(this,I,M).call(this,"media-orientation-unlock-request",s)}enterPictureInPicture(s){o(this,I,M).call(this,"media-enter-pip-request",s)}exitPictureInPicture(s){o(this,I,M).call(this,"media-exit-pip-request",s)}seeking(s,t){o(this,I,M).call(this,"media-seeking-request",t,s)}seek(s,t){o(this,I,M).call(this,"media-seek-request",t,s)}seekToLiveEdge(s){o(this,I,M).call(this,"media-live-edge-request",s)}changeDuration(s,t){o(this,I,M).call(this,"media-duration-change-request",t,s)}changeClipStart(s,t){o(this,I,M).call(this,"media-clip-start-change-request",t,s)}changeClipEnd(s,t){o(this,I,M).call(this,"media-clip-end-change-request",t,s)}changeVolume(s,t){o(this,I,M).call(this,"media-volume-change-request",t,Math.max(0,Math.min(1,s)))}changeAudioTrack(s,t){o(this,I,M).call(this,"media-audio-track-change-request",t,s)}changeQuality(s,t){o(this,I,M).call(this,"media-quality-change-request",t,s)}requestAutoQuality(s){this.changeQuality(-1,s)}changeTextTrackMode(s,t,e){o(this,I,M).call(this,"media-text-track-change-request",e,{index:s,mode:t})}changePlaybackRate(s,t){o(this,I,M).call(this,"media-rate-change-request",t,s)}changeAudioGain(s,t){o(this,I,M).call(this,"media-audio-gain-change-request",t,s)}resumeControls(s){o(this,I,M).call(this,"media-resume-controls-request",s)}pauseControls(s){o(this,I,M).call(this,"media-pause-controls-request",s)}togglePaused(s){const t=this.getPlayer(s==null?void 0:s.target);t&&(t.state.paused?this.play(s):this.pause(s))}toggleControls(s){const t=this.getPlayer(s==null?void 0:s.target);t&&(t.controls.showing?t.controls.hide(0,s):t.controls.show(0,s))}toggleMuted(s){const t=this.getPlayer(s==null?void 0:s.target);t&&(t.state.muted?this.unmute(s):this.mute(s))}toggleFullscreen(s,t){const e=this.getPlayer(t==null?void 0:t.target);e&&(e.state.fullscreen?this.exitFullscreen(s,t):this.enterFullscreen(s,t))}togglePictureInPicture(s){const t=this.getPlayer(s==null?void 0:s.target);t&&(t.state.pictureInPicture?this.exitPictureInPicture(s):this.enterPictureInPicture(s))}showCaptions(s){const t=this.getPlayer(s==null?void 0:s.target);if(!t)return;let e=t.state.textTracks,n=r(this,Be);(!e[n]||!kt(e[n]))&&(n=-1),n===-1&&(n=e.findIndex(a=>kt(a)&&a.default)),n===-1&&(n=e.findIndex(a=>kt(a))),n>=0&&this.changeTextTrackMode(n,"showing",s),h(this,Be,-1)}disableCaptions(s){const t=this.getPlayer(s==null?void 0:s.target);if(!t)return;const e=t.state.textTracks,n=t.state.textTrack;if(n){const a=e.indexOf(n);this.changeTextTrackMode(a,"disabled",s),h(this,Be,a)}}toggleCaptions(s){const t=this.getPlayer(s==null?void 0:s.target);t&&(t.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(s,t){o(this,I,M).call(this,"media-user-loop-change-request",t,s)}}we=new WeakMap,at=new WeakMap,Be=new WeakMap,fi=new WeakMap,I=new WeakSet,M=function(s,t,e){var u,c;const n=new N(s,{bubbles:!0,composed:!0,cancelable:!0,detail:e,trigger:t});let a=(t==null?void 0:t.target)||null;a&&a instanceof Un&&(a=a.el),a=!a||a===document||a===window||a===document.body||((u=r(this,at))==null?void 0:u.el)&&a instanceof Node&&!r(this,at).el.contains(a)?r(this,we)??((c=this.getPlayer())==null?void 0:c.el):a??r(this,we),r(this,at)?s==="media-play-request"&&!r(this,at).state.canLoad?a==null||a.dispatchEvent(n):r(this,at).canPlayQueue.enqueue(s,()=>a==null?void 0:a.dispatchEvent(n)):a==null||a.dispatchEvent(n)},mu=function(s){};var H;class yu{constructor(){g(this,"playerId","vds-player");g(this,"mediaId",null);d(this,H,{volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null});g(this,"saveTimeThrottled",ra(this.saveTime.bind(this),1e3))}async getVolume(){return r(this,H).volume}async setVolume(s){r(this,H).volume=s,this.save()}async getMuted(){return r(this,H).muted}async setMuted(s){r(this,H).muted=s,this.save()}async getTime(){return r(this,H).time}async setTime(s,t){const e=s<0;r(this,H).time=e?null:s,e||t?this.saveTime():this.saveTimeThrottled()}async getLang(){return r(this,H).lang}async setLang(s){r(this,H).lang=s,this.save()}async getCaptions(){return r(this,H).captions}async setCaptions(s){r(this,H).captions=s,this.save()}async getPlaybackRate(){return r(this,H).rate}async setPlaybackRate(s){r(this,H).rate=s,this.save()}async getAudioGain(){return r(this,H).audioGain}async setAudioGain(s){r(this,H).audioGain=s,this.save()}async getVideoQuality(){return r(this,H).quality}async setVideoQuality(s){r(this,H).quality=s,this.save()}onChange(s,t,e="vds-player"){const n=e?localStorage.getItem(e):null,a=t?localStorage.getItem(t):null;this.playerId=e,this.mediaId=t,h(this,H,{volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...n?JSON.parse(n):{},time:a?+a:null})}save(){if(!this.playerId)return;const s=JSON.stringify({...r(this,H),time:void 0});localStorage.setItem(this.playerId,s)}saveTime(){if(!this.mediaId)return;const s=(r(this,H).time??0).toString();localStorage.setItem(this.mediaId,s)}}H=new WeakMap;var As,Nt,Ls,ee,yt,La,Ia,Qi,Bi;class gu{constructor(){d(this,yt);g(this,"priority",0);d(this,As,!0);d(this,Nt,null);d(this,Ls,null);d(this,ee,new Set)}canRender(s,t){return!!t}attach(s){h(this,Nt,s),s&&(s.textTracks.onchange=o(this,yt,Bi).bind(this))}addTrack(s){r(this,ee).add(s),o(this,yt,La).call(this,s)}removeTrack(s){var t,e;(e=(t=s[E.native])==null?void 0:t.remove)==null||e.call(t),s[E.native]=null,r(this,ee).delete(s)}changeTrack(s){const t=s==null?void 0:s[E.native];t&&t.track.mode!=="showing"&&(t.track.mode="showing"),h(this,Ls,s)}setDisplay(s){h(this,As,s),o(this,yt,Bi).call(this)}detach(){r(this,Nt)&&(r(this,Nt).textTracks.onchange=null);for(const s of r(this,ee))this.removeTrack(s);r(this,ee).clear(),h(this,Nt,null),h(this,Ls,null)}}As=new WeakMap,Nt=new WeakMap,Ls=new WeakMap,ee=new WeakMap,yt=new WeakSet,La=function(s){var e;if(!r(this,Nt))return;const t=s[e=E.native]??(s[e]=o(this,yt,Ia).call(this,s));cu(t)&&(r(this,Nt).append(t),t.track.mode=t.default?"showing":"disabled")},Ia=function(s){const t=document.createElement("track"),e=s.default||s.mode==="showing",n=s.src&&s.type==="vtt";return t.id=s.id,t.src=n?s.src:"",t.label=s.label,t.kind=s.kind,t.default=e,s.language&&(t.srclang=s.language),e&&!n&&o(this,yt,Qi).call(this,s,t.track),t},Qi=function(s,t){var e;if(!(s.src&&s.type==="vtt"||(e=t.cues)!=null&&e.length))for(const n of s.cues)t.addCue(n)},Bi=function(s){for(const t of r(this,ee)){const e=t[E.native];if(!e)continue;if(!r(this,As)){e.track.mode=e.managed?"hidden":"disabled";continue}const n=e.track.mode==="showing";n&&o(this,yt,Qi).call(this,t,e.track),t.setMode(n?"showing":"disabled",s)}};var Te,We,$e,Is,xs,ot,Et,U,xa,Wi,Oa,Ma,_a,Ve,Ra;class bu{constructor(s){d(this,U);d(this,Te,null);d(this,We);d(this,$e,[]);d(this,Is);d(this,xs,!1);d(this,ot,null);d(this,Et,null);h(this,Is,s);const t=s.textTracks;h(this,We,t),$(o(this,U,xa).bind(this)),et(o(this,U,Ra).bind(this)),new ct(t).add("add",o(this,U,Ma).bind(this)).add("remove",o(this,U,_a).bind(this)).add("mode-change",o(this,U,Ve).bind(this))}add(s){r(this,$e).push(s),vs(o(this,U,Ve).bind(this))}remove(s){s.detach(),r(this,$e).splice(r(this,$e).indexOf(s),1),vs(o(this,U,Ve).bind(this))}attachVideo(s){requestAnimationFrame(()=>{if(h(this,Te,s),s){h(this,ot,new gu),r(this,ot).attach(s);for(const t of r(this,We))o(this,U,Wi).call(this,t)}o(this,U,Ve).call(this)})}}Te=new WeakMap,We=new WeakMap,$e=new WeakMap,Is=new WeakMap,xs=new WeakMap,ot=new WeakMap,Et=new WeakMap,U=new WeakSet,xa=function(){const{nativeControls:s}=r(this,Is).$state;h(this,xs,s()),o(this,U,Ve).call(this)},Wi=function(s){var t;kt(s)&&((t=r(this,ot))==null||t.addTrack(s))},Oa=function(s){var t;kt(s)&&((t=r(this,ot))==null||t.removeTrack(s))},Ma=function(s){o(this,U,Wi).call(this,s.detail)},_a=function(s){o(this,U,Oa).call(this,s.detail)},Ve=function(){var e,n,a,l,u,c,p;const s=r(this,We).selected;if(r(this,Te)&&(r(this,xs)||s!=null&&s[E.nativeHLS])){(e=r(this,Et))==null||e.changeTrack(null),(n=r(this,ot))==null||n.setDisplay(!0),(a=r(this,ot))==null||a.changeTrack(s);return}if((l=r(this,ot))==null||l.setDisplay(!1),(u=r(this,ot))==null||u.changeTrack(null),!s){(c=r(this,Et))==null||c.changeTrack(null);return}const t=r(this,$e).sort((f,y)=>f.priority-y.priority).find(f=>f.canRender(s,r(this,Te)));r(this,Et)!==t&&((p=r(this,Et))==null||p.detach(),t==null||t.attach(r(this,Te)),h(this,Et,t??null)),t==null||t.changeTrack(s)},Ra=function(){var s,t;(s=r(this,ot))==null||s.detach(),h(this,ot,null),(t=r(this,Et))==null||t.detach(),h(this,Et,null)};var Rr,ke,St,Pt,qt,Os,Ye,Ms,xt,Da,Yi,zi;class wu extends va{constructor(){super();d(this,xt);d(this,ke,!1);d(this,St,{});d(this,Pt,null);d(this,qt,null);g(this,Rr);d(this,Os,aa(async()=>{var n;if(!r(this,ke))return;!r(this,qt)&&r(this,Pt)&&h(this,qt,await r(this,Pt).getLang());const t=await((n=r(this,Pt))==null?void 0:n.getCaptions()),e=[["captions","subtitles"],"chapters","descriptions","metadata"];for(const a of e){const l=this.getByKind(a);if(l.find(y=>y.mode==="showing"))continue;const u=r(this,qt)?l.find(y=>y.language===r(this,qt)):null,c=$t(a)?r(this,St)[a.find(y=>r(this,St)[y])||""]:r(this,St)[a],p=u??c,f=p&&kt(p);p&&(!f||t!==!1)&&(p.mode="showing",f&&o(this,xt,Yi).call(this,p))}},300));d(this,Ye,null);d(this,Ms,o(this,xt,Da).bind(this))}get selected(){return this.items.find(e=>e.mode==="showing"&&kt(e))??null}get selectedIndex(){const t=this.selected;return t?this.indexOf(t):-1}get preferredLang(){return r(this,qt)}set preferredLang(t){h(this,qt,t),o(this,xt,zi).call(this,t)}add(t,e){const n=t instanceof ci,a=n?t:new ci(t),l=t.kind==="captions"||t.kind==="subtitles"?"captions":t.kind;return r(this,St)[l]&&t.default&&delete t.default,a.addEventListener("mode-change",r(this,Ms)),this[O.add](a,e),a[E.crossOrigin]=this[E.crossOrigin],r(this,ke)&&a[E.canLoad](),t.default&&(r(this,St)[l]=a),r(this,Os).call(this),this}remove(t,e){if(h(this,Ye,t),!!this.items.includes(t))return t===r(this,St)[t.kind]&&delete r(this,St)[t.kind],t.mode="disabled",t[E.onModeChange]=null,t.removeEventListener("mode-change",r(this,Ms)),this[O.remove](t,e),h(this,Ye,null),this}clear(t){for(const e of[...this.items])this.remove(e,t);return this}getByKind(t){const e=Array.isArray(t)?t:[t];return this.items.filter(n=>e.includes(n.kind))}[(Rr=E.crossOrigin,E.canLoad)](){if(!r(this,ke)){for(const t of this.items)t[E.canLoad]();h(this,ke,!0),r(this,Os).call(this)}}setStorage(t){h(this,Pt,t)}}ke=new WeakMap,St=new WeakMap,Pt=new WeakMap,qt=new WeakMap,Os=new WeakMap,Ye=new WeakMap,Ms=new WeakMap,xt=new WeakSet,Da=function(t){const e=t.detail;if(r(this,Pt)&&kt(e)&&e!==r(this,Ye)&&o(this,xt,Yi).call(this,e),e.mode==="showing"){const n=kt(e)?["captions","subtitles"]:[e.kind];for(const a of this.items)a.mode==="showing"&&a!=e&&n.includes(a.kind)&&(a.mode="disabled")}this.dispatchEvent(new N("mode-change",{detail:t.detail,trigger:t}))},Yi=function(t){var e,n;t.mode!=="disabled"&&o(this,xt,zi).call(this,t.language),(n=(e=r(this,Pt))==null?void 0:e.setCaptions)==null||n.call(e,t.mode==="showing")},zi=function(t){var e,n;(n=(e=r(this,Pt))==null?void 0:e.setLang)==null||n.call(e,h(this,qt,t))};const fs=Symbol(0);class Va extends va{get selected(){return this.items.find(s=>s.selected)??null}get selectedIndex(){return this.items.findIndex(s=>s.selected)}[O.onRemove](s,t){this[O.select](s,!1,t)}[O.add](s,t){s[fs]=!1,Object.defineProperty(s,"selected",{get(){return this[fs]},set:e=>{var n;this.readonly||((n=this[O.onUserSelect])==null||n.call(this),this[O.select](s,e))}}),super[O.add](s,t)}[O.select](s,t,e){if(t===(s==null?void 0:s[fs]))return;const n=this.selected;s&&(s[fs]=t),(t?n!==s:n===s)&&(n&&(n[fs]=!1),this.dispatchEvent(new N("change",{detail:{prev:n,current:this.selected},trigger:e})))}}class Tu extends Va{}var Dr,ve;class $u extends Va{constructor(){super(...arguments);d(this,ve,!1);g(this,"switch","current");g(this,Dr)}get auto(){return r(this,ve)||this.readonly}[(Dr=gt.enableAuto,O.onUserSelect)](){this[gt.setAuto](!1)}[O.onReset](t){this[gt.enableAuto]=void 0,this[gt.setAuto](!1,t)}autoSelect(t){var e;this.readonly||r(this,ve)||!this[gt.enableAuto]||((e=this[gt.enableAuto])==null||e.call(this,t),this[gt.setAuto](!0,t))}getBySrc(t){return this.items.find(e=>e.src===t)}[gt.setAuto](t,e){r(this,ve)!==t&&(h(this,ve,t),this.dispatchEvent(new N("auto-change",{detail:t,trigger:e})))}}ve=new WeakMap;function ku(i){return i instanceof HTMLAudioElement}function vu(i){return i instanceof HTMLVideoElement}function Eu(i){return ku(i)||vu(i)}class _e extends js{}const Su={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},Js=new Set(["Shift","Alt","Meta","Ctrl"]),Pu='button, [role="button"]',wr='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';var Q,K,Na,Fa,Ha,Ua,ei,Ee,Ga,Ft,Xi,Ka;class qu extends _e{constructor(t){super();d(this,K);d(this,Q);d(this,Ee);d(this,Ft,null);h(this,Q,t)}onConnect(){$(o(this,K,Na).bind(this))}}Q=new WeakMap,K=new WeakSet,Na=function(){const{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;const n=e()==="player"?this.el:document,a=tt(!1);n===this.el?new ct(this.el).add("focusin",()=>a.set(!0)).add("focusout",l=>{this.el.contains(l.target)||a.set(!1)}):(T(a)||a.set(document.querySelector("[data-media-player]")===this.el),us(document,"focusin",l=>{const u=l.composedPath().find(c=>c instanceof Element&&c.localName==="media-player");u!==void 0&&a.set(this.el===u)})),$(()=>{a()&&new ct(n).add("keyup",o(this,K,Fa).bind(this)).add("keydown",o(this,K,Ha).bind(this)).add("keydown",o(this,K,Ua).bind(this),{capture:!0})})},Fa=function(t){var l,u;const e=document.activeElement;if(!t.key||!this.$state.canSeek()||e!=null&&e.matches(wr))return;let{method:n,value:a}=o(this,K,ei).call(this,t);if(!_(a)&&!$t(a)){(l=a==null?void 0:a.onKeyUp)==null||l.call(a,{event:t,player:r(this,Q).player,remote:r(this,Q).remote}),(u=a==null?void 0:a.callback)==null||u.call(a,t,r(this,Q).remote);return}if(n!=null&&n.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),r(this,Ft)?(o(this,K,Xi).call(this,t,n==="seekForward"),h(this,Ft,null)):(r(this,Q).remote.seek(r(this,Ee),t),h(this,Ee,void 0))),n!=null&&n.startsWith("volume")){const c=this.el.querySelector("[data-media-volume-slider]");c==null||c.dispatchEvent(new KeyboardEvent("keyup",{key:n==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}},Ha=function(t){var u,c,p,f;if(!t.key||Js.has(t.key))return;const e=document.activeElement;if(e!=null&&e.matches(wr)||Yl(t)&&(e!=null&&e.matches(Pu)))return;let{method:n,value:a}=o(this,K,ei).call(this,t),l=!t.metaKey&&/^[0-9]$/.test(t.key);if(!_(a)&&!$t(a)&&!l){(u=a==null?void 0:a.onKeyDown)==null||u.call(a,{event:t,player:r(this,Q).player,remote:r(this,Q).remote}),(c=a==null?void 0:a.callback)==null||c.call(a,t,r(this,Q).remote);return}if(!n&&l){t.preventDefault(),t.stopPropagation(),r(this,Q).remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(n){switch(t.preventDefault(),t.stopPropagation(),n){case"seekForward":case"seekBackward":o(this,K,Ka).call(this,t,n,n==="seekForward");break;case"volumeUp":case"volumeDown":const y=this.el.querySelector("[data-media-volume-slider]");if(y)y.dispatchEvent(new KeyboardEvent("keydown",{key:n==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const L=t.shiftKey?.1:.05;r(this,Q).remote.changeVolume(this.$state.volume()+(n==="volumeUp"?+L:-L),t)}break;case"toggleFullscreen":r(this,Q).remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const w=this.$state.playbackRate();r(this,Q).remote.changePlaybackRate(Math.max(.25,Math.min(2,w+(n==="speedUp"?.25:-.25))),t);break;default:(f=(p=r(this,Q).remote)[n])==null||f.call(p,t)}this.$state.lastKeyboardAction.set({action:n,event:t})}},Ua=function(t){Eu(t.target)&&o(this,K,ei).call(this,t).method&&t.preventDefault()},ei=function(t){const e={...this.$props.keyShortcuts(),...r(this,Q).ariaKeys},n=Object.keys(e).find(a=>{var p;const l=e[a],u=$t(l)?l.join(" "):_(l)?l:l==null?void 0:l.keys,c=(p=$t(u)?u:u==null?void 0:u.split(" "))==null?void 0:p.map(f=>Au(f).replace(/Control/g,"Ctrl").split("+"));return c==null?void 0:c.some(f=>{const y=new Set(f.filter(w=>Js.has(w)));for(const w of Js){const L=w.toLowerCase()+"Key";if(!y.has(w)&&t[L])return!1}return f.every(w=>Js.has(w)?t[w.toLowerCase()+"Key"]:t.key===w.replace("Space"," "))})});return{method:n,value:n?e[n]:null}},Ee=new WeakMap,Ga=function(t,e){const n=t.shiftKey?10:5;return h(this,Ee,Math.max(0,Math.min((r(this,Ee)??this.$state.currentTime())+(e==="seekForward"?+n:-n),this.$state.duration())))},Ft=new WeakMap,Xi=function(t,e){var n;(n=r(this,Ft))==null||n.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))},Ka=function(t,e,n){this.$state.canSeek()&&(r(this,Ft)||h(this,Ft,this.el.querySelector("[data-media-time-slider]")),r(this,Ft)?o(this,K,Xi).call(this,t,n):r(this,Q).remote.seeking(o(this,K,Ga).call(this,t,e),t))};const Cu=["!","@","#","$","%","^","&","*","(",")"];function Au(i){return i.replace(/Shift\+(\d)/g,(s,t)=>Cu[t-1])}var ze,Ht,_s,Xe,se,Je,x,ja,Qa,Ba,Wa,Ya,za,Xa,Ja,si,Ji,gs,Zi;class Lu extends _e{constructor(){super(...arguments);d(this,x);d(this,ze,-2);d(this,Ht,!1);d(this,_s,tt(!1));d(this,Xe,tt(!1));d(this,se,null);d(this,Je,tt(!0));g(this,"defaultDelay",2e3)}get canIdle(){return r(this,Je).call(this)}set canIdle(t){r(this,Je).set(t)}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:t}=this.$props;return r(this,_s).call(this)||t()}set hideOnMouseLeave(t){r(this,_s).set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){o(this,x,si).call(this),r(this,Ht)||o(this,x,gs).call(this,!0,t,e)}hide(t=this.defaultDelay,e){o(this,x,si).call(this),r(this,Ht)||o(this,x,gs).call(this,!1,t,e)}pause(t){h(this,Ht,!0),o(this,x,si).call(this),o(this,x,gs).call(this,!0,0,t)}resume(t){h(this,Ht,!1),!this.$state.paused()&&o(this,x,gs).call(this,!1,this.defaultDelay,t)}onConnect(){$(o(this,x,ja).bind(this))}}ze=new WeakMap,Ht=new WeakMap,_s=new WeakMap,Xe=new WeakMap,se=new WeakMap,Je=new WeakMap,x=new WeakSet,ja=function(){const{viewType:t}=this.$state;if(!this.el||!r(this,Je).call(this))return;if(t()==="audio"){this.show();return}$(o(this,x,Qa).bind(this)),$(o(this,x,Ba).bind(this));const e=o(this,x,Wa).bind(this),n=o(this,x,Ya).bind(this),a=o(this,x,za).bind(this);new ct(this.el).add("can-play",l=>this.show(0,l)).add("play",e).add("pause",n).add("end",a).add("auto-play-fail",n)},Qa=function(){if(!this.el)return;const{started:t,pointer:e,paused:n}=this.$state;if(!t()||e()!=="fine")return;const a=new ct(this.el),l=this.hideOnMouseLeave;(!l||!r(this,Xe).call(this))&&$(()=>{n()||a.add("pointermove",o(this,x,Ji).bind(this))}),l&&a.add("mouseenter",o(this,x,Xa).bind(this)).add("mouseleave",o(this,x,Ja).bind(this))},Ba=function(){const{paused:t,started:e,autoPlayError:n}=this.$state;if(t()||n()&&!e())return;const a=o(this,x,Ji).bind(this);$(()=>{if(!this.el)return;const l=this.$state.pointer(),u=l==="coarse",c=new ct(this.el),p=[u?"touchend":"pointerup","keydown"];for(const f of p)c.add(f,a,{passive:!1})})},Wa=function(t){t.triggers.hasType("ended")||(this.show(0,t),this.hide(void 0,t))},Ya=function(t){this.show(0,t)},za=function(t){const{loop:e}=this.$state;e()&&this.hide(0,t)},Xa=function(t){r(this,Xe).set(!1),this.show(0,t),this.hide(void 0,t)},Ja=function(t){r(this,Xe).set(!0),this.hide(0,t)},si=function(){window.clearTimeout(r(this,ze)),h(this,ze,-1)},Ji=function(t){var e;t.MEDIA_GESTURE||r(this,Ht)||lu(t)||(Yr(t)&&(t.key==="Escape"?((e=this.el)==null||e.focus(),h(this,se,null)):r(this,se)&&(t.preventDefault(),requestAnimationFrame(()=>{var n;(n=r(this,se))==null||n.focus(),h(this,se,null)}))),this.show(0,t),this.hide(this.defaultDelay,t))},gs=function(t,e,n){if(e===0){o(this,x,Zi).call(this,t,n);return}h(this,ze,window.setTimeout(()=>{this.scope&&o(this,x,Zi).call(this,t&&!r(this,Ht),n)},e))},Zi=function(t,e){var n;this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&((n=this.el)!=null&&n.contains(document.activeElement))&&(h(this,se,document.activeElement),requestAnimationFrame(()=>{var a;(a=this.el)==null||a.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:t,trigger:e}))};class Iu{constructor(){g(this,"name","audio");g(this,"target")}canPlay(s){return ya(s)?!_(s.src)||s.type==="?"||vc(this.target,s.type):!1}mediaType(){return"audio"}async load(s){return new(await mt(async()=>{const{AudioProvider:t}=await import("./vidstack-audio.gBKlHO2m.js");return{AudioProvider:t}},__vite__mapDeps([2,3,4]),import.meta.url)).AudioProvider(this.target,s)}}class jn{constructor(){g(this,"name","video");g(this,"target")}canPlay(s){return ga(s)?!_(s.src)||s.type==="?"||Ec(this.target,s.type):!1}mediaType(){return"video"}async load(s){return new(await mt(async()=>{const{VideoProvider:t}=await import("./vidstack-video.CiIesUZ1.js");return{VideoProvider:t}},__vite__mapDeps([5,3,4]),import.meta.url)).VideoProvider(this.target,s)}}const mi=class mi extends jn{constructor(){super(...arguments);g(this,"name","hls")}canPlay(t){return mi.supported&&Qs(t)}async load(t){return new(await mt(async()=>{const{HLSProvider:e}=await import("./vidstack-hls.D9uMRbzY.js");return{HLSProvider:e}},__vite__mapDeps([6,5,3,4]),import.meta.url)).HLSProvider(this.target,t)}};g(mi,"supported",Gn());let tn=mi;const yi=class yi extends jn{constructor(){super(...arguments);g(this,"name","dash")}canPlay(t){return yi.supported&&Kn(t)}async load(t){return new(await mt(async()=>{const{DASHProvider:e}=await import("./vidstack-dash.Dufw8HMr.js");return{DASHProvider:e}},__vite__mapDeps([7,5,3,4]),import.meta.url)).DASHProvider(this.target,t)}};g(yi,"supported",Ac());let en=yi;class xu{constructor(){g(this,"name","vimeo");g(this,"target")}preconnect(){const s=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(const t of s)Ti(t)}canPlay(s){return _(s.src)&&s.type==="video/vimeo"}mediaType(){return"video"}async load(s){return new(await mt(async()=>{const{VimeoProvider:t}=await import("./vidstack-vimeo.vAf2QalG.js");return{VimeoProvider:t}},__vite__mapDeps([8,4,9,10]),import.meta.url)).VimeoProvider(this.target,s)}async loadPoster(s,t,e){const{resolveVimeoVideoId:n,getVimeoVideoInfo:a}=await mt(async()=>{const{resolveVimeoVideoId:c,getVimeoVideoInfo:p}=await import("./vidstack-krOAtKMi.C3UUF7YD.js");return{resolveVimeoVideoId:c,getVimeoVideoInfo:p}},[],import.meta.url);if(!_(s.src))return null;const{videoId:l,hash:u}=n(s.src);return l?a(l,e,u).then(c=>c?c.poster:null):null}}class Ou{constructor(){g(this,"name","youtube");g(this,"target")}preconnect(){const s=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(const t of s)Ti(t)}canPlay(s){return _(s.src)&&s.type==="video/youtube"}mediaType(){return"video"}async load(s){return new(await mt(async()=>{const{YouTubeProvider:t}=await import("./vidstack-youtube.BjHdGGme.js");return{YouTubeProvider:t}},__vite__mapDeps([11,9,12]),import.meta.url)).YouTubeProvider(this.target,s)}async loadPoster(s,t,e){const{findYouTubePoster:n,resolveYouTubeVideoId:a}=await mt(async()=>{const{findYouTubePoster:u,resolveYouTubeVideoId:c}=await import("./vidstack-Zc3I7oOd.CA6XwpqT.js");return{findYouTubePoster:u,resolveYouTubeVideoId:c}},[],import.meta.url),l=_(s.src)&&a(s.src);return l?n(l,e):null}}const Li=Symbol(0),Mu=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],_u={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:Su,storage:null};var Rs,Se;class Tr extends _e{constructor(t,e){super();d(this,Rs);d(this,Se);h(this,Rs,t),h(this,Se,e)}async onAttach(t){const e=this.$props[r(this,Rs)]();if(e==="eager")requestAnimationFrame(r(this,Se));else if(e==="idle")ac(r(this,Se));else if(e==="visible"){let n,a=new IntersectionObserver(l=>{this.scope&&l[0].isIntersecting&&(n==null||n(),n=void 0,r(this,Se).call(this))});a.observe(t),n=et(()=>a.disconnect())}}}Rs=new WeakMap,Se=new WeakMap;var Ds,bt,gi,Za;class Ru{constructor(s,t){d(this,gi);d(this,Ds);d(this,bt);h(this,Ds,s),h(this,bt,t)}notify(s,...t){r(this,Ds).call(this,new N(s,{detail:t==null?void 0:t[0],trigger:t==null?void 0:t[1]}))}async ready(s,t){return vs(async()=>{var Wn,Yn,zn,Ws,Xn,Jn,Zn;r(this,bt);const{autoPlay:e,canPlay:n,started:a,duration:l,seekable:u,buffered:c,remotePlaybackInfo:p,playsInline:f,savedState:y,source:w}=r(this,bt).$state;if(n())return;const L={duration:(s==null?void 0:s.duration)??l(),seekable:(s==null?void 0:s.seekable)??u(),buffered:(s==null?void 0:s.buffered)??c(),provider:r(this,bt).$provider()};this.notify("can-play",L,t),Es();let P=r(this,bt).$provider(),{storage:q,qualities:he}=r(this,bt),{muted:Bs,volume:wl,clipStartTime:Tl,playbackRate:$l}=r(this,bt).$props;await((Wn=q==null?void 0:q.onLoad)==null?void 0:Wn.call(q,w()));const kl=(Yn=y())==null?void 0:Yn.currentTime,Qn=(zn=y())==null?void 0:zn.paused,$i=await(q==null?void 0:q.getTime()),Bn=kl??$i??Tl(),vl=Qn||Qn!==!1&&!a()&&e();if(P){P.setVolume(await(q==null?void 0:q.getVolume())??wl()),P.setMuted(Bs()||!!await(q==null?void 0:q.getMuted()));const Re=await(q==null?void 0:q.getAudioGain())??1;Re>1&&((Xn=(Ws=P.audioGain)==null?void 0:Ws.setGain)==null||Xn.call(Ws,Re)),(Jn=P.setPlaybackRate)==null||Jn.call(P,await(q==null?void 0:q.getPlaybackRate())??$l()),(Zn=P.setPlaysInline)==null||Zn.call(P,f()),Bn>0&&P.setCurrentTime(Bn)}const ps=await(q==null?void 0:q.getVideoQuality());if(ps&&he.length){let Re=null,tr=1/0;for(const Ys of he){const er=Math.abs(ps.width-Ys.width)+Math.abs(ps.height-Ys.height)+(ps.bitrate?Math.abs(ps.bitrate-(Ys.bitrate??0)):0);er<tr&&(Re=Ys,tr=er)}Re&&(Re.selected=!0)}n()&&vl?await o(this,gi,Za).call(this,t):$i&&$i>0&&this.notify("started",void 0,t),p.set(null)})}}Ds=new WeakMap,bt=new WeakMap,gi=new WeakSet,Za=async function(s){const{player:t,$state:{autoPlaying:e,muted:n}}=r(this,bt);e.set(!0);const a=new N("auto-play-attempt",{trigger:s});try{await t.play(a)}catch{}};var ie;class Du{constructor(){d(this,ie,new Map)}enqueue(s,t){r(this,ie).set(s,t)}serve(s){const t=this.peek(s);return r(this,ie).delete(s),t}peek(s){return r(this,ie).get(s)}delete(s){r(this,ie).delete(s)}clear(){r(this,ie).clear()}}ie=new WeakMap;var ne,Ze,wt,ue,sn,nn;class to{constructor(){d(this,ue);d(this,ne,!1);d(this,Ze,_i());d(this,wt,new Map)}get size(){return r(this,wt).size}get isServing(){return r(this,ne)}async waitForFlush(){r(this,ne)||await r(this,Ze).promise}enqueue(s,t){if(r(this,ne)){t();return}r(this,wt).delete(s),r(this,wt).set(s,t)}serve(s){var t;(t=r(this,wt).get(s))==null||t(),r(this,wt).delete(s)}start(){o(this,ue,sn).call(this),h(this,ne,!0),r(this,wt).size>0&&o(this,ue,sn).call(this)}stop(){h(this,ne,!1)}reset(){this.stop(),r(this,wt).clear(),o(this,ue,nn).call(this)}}ne=new WeakMap,Ze=new WeakMap,wt=new WeakMap,ue=new WeakSet,sn=function(){for(const s of r(this,wt).keys())this.serve(s);o(this,ue,nn).call(this)},nn=function(){r(this,Ze).resolve(),h(this,Ze,_i())};var Ut,k,Gt,Pe,Kt,V,re,v,eo,so,io,rn,ts,an,on,no,ro,ao,oo,lo,co,qe,uo,ln,cn,Nu;class Vu extends _e{constructor(t,e,n){super();d(this,v);d(this,Ut);d(this,k);d(this,Gt);g(this,"controls");d(this,Pe);d(this,Kt);d(this,V);d(this,re,new to);d(this,ts,!1);d(this,qe);h(this,Ut,t),h(this,k,e),h(this,Gt,n),h(this,V,n.$provider),this.controls=new Lu,h(this,Pe,new du),h(this,Kt,new ui)}onAttach(){this.listen("fullscreen-change",o(this,v,uo).bind(this))}onConnect(t){const e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),n=new ct(t),a=o(this,v,io).bind(this);for(const l of e)l.startsWith("media-")&&n.add(l,a);o(this,v,eo).call(this),$(o(this,v,so).bind(this)),$(o(this,v,no).bind(this)),$(o(this,v,ro).bind(this)),$(o(this,v,ao).bind(this)),$(o(this,v,oo).bind(this)),$(o(this,v,lo).bind(this)),$(o(this,v,co).bind(this))}onDestroy(){try{const t=this.createEvent("destroy"),{pictureInPicture:e,fullscreen:n}=this.$state;n()&&this.exitFullscreen("prefer-media",t),e()&&this.exitPictureInPicture(t)}catch{}r(this,re).reset()}async play(t){const{canPlay:e,paused:n,autoPlaying:a}=this.$state;if(o(this,v,rn).call(this,t)||!T(n))return;t&&r(this,k).queue.enqueue("media-play-request",t);const l=T(a);try{const u=T(r(this,V));return Ii(u,T(e)),await u.play()}catch(u){const c=this.createEvent("play-fail",{detail:Ci(u),trigger:t});throw c.autoPlay=l,r(this,Ut).handle(c),u}}async pause(t){const{canPlay:e,paused:n}=this.$state;if(!T(n)){t&&r(this,k).queue.enqueue("media-pause-request",t);try{const a=T(r(this,V));return Ii(a,T(e)),await a.pause()}catch(a){throw r(this,k).queue.delete("media-pause-request"),a}}}setAudioGain(t,e){const{audioGain:n,canSetAudioGain:a}=this.$state;if(n()===t)return;const l=r(this,V).call(this);if(!(l!=null&&l.audioGain)||!a())throw Error("[vidstack] audio gain api not available");e&&r(this,k).queue.enqueue("media-audio-gain-change-request",e),l.audioGain.setGain(t)}seekToLiveEdge(t){const{canPlay:e,live:n,liveEdge:a,canSeek:l,liveSyncPosition:u,seekableEnd:c,userBehindLiveEdge:p}=this.$state;if(p.set(!1),T(()=>!n()||a()||!l()))return;const f=T(r(this,V));Ii(f,T(e)),t&&r(this,k).queue.enqueue("media-seek-request",t);const y=c()-2;f.setCurrentTime(Math.min(y,u()??y))}async enterFullscreen(t="prefer-media",e){const n=o(this,v,an).call(this,t);if($r(t,n),!n.active)return T(this.$state.pictureInPicture)&&(h(this,ts,!0),await this.exitPictureInPicture(e)),e&&r(this,k).queue.enqueue("media-enter-fullscreen-request",e),n.enter()}async exitFullscreen(t="prefer-media",e){const n=o(this,v,an).call(this,t);if($r(t,n),!!n.active){e&&r(this,k).queue.enqueue("media-exit-fullscreen-request",e);try{const a=await n.exit();return r(this,ts)&&T(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),a}finally{h(this,ts,!1)}}}async enterPictureInPicture(t){if(o(this,v,on).call(this),!this.$state.pictureInPicture())return t&&r(this,k).queue.enqueue("media-enter-pip-request",t),await r(this,V).call(this).pictureInPicture.enter()}async exitPictureInPicture(t){if(o(this,v,on).call(this),!!this.$state.pictureInPicture())return t&&r(this,k).queue.enqueue("media-exit-pip-request",t),await r(this,V).call(this).pictureInPicture.exit()}async"media-airplay-request"(t){try{await this.requestAirPlay(t)}catch{}}async requestAirPlay(t){var e;try{const n=(e=r(this,V).call(this))==null?void 0:e.airPlay;if(!(n!=null&&n.supported))throw Error("No AirPlay adapter.");return t&&r(this,k).queue.enqueue("media-airplay-request",t),await n.prompt()}catch(n){throw r(this,k).queue.delete("media-airplay-request"),n}}async"media-google-cast-request"(t){try{await this.requestGoogleCast(t)}catch{}}async requestGoogleCast(t){try{const{canGoogleCast:e}=this.$state;if(!T(e)){const a=Error("Cast not available.");throw a.code="CAST_NOT_AVAILABLE",a}if(Ti("https://www.gstatic.com"),!r(this,qe)){const a=await mt(()=>import("./vidstack-kV1-bfkY.BkKCqHaY.js").then(l=>l.v),__vite__mapDeps([13,1]),import.meta.url);h(this,qe,new a.GoogleCastLoader)}await r(this,qe).prompt(r(this,Gt)),t&&r(this,k).queue.enqueue("media-google-cast-request",t);const n=T(this.$state.remotePlaybackState)!=="disconnected";n&&this.$state.savedState.set({paused:T(this.$state.paused),currentTime:T(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(n?r(this,qe):null)}catch(e){throw r(this,k).queue.delete("media-google-cast-request"),e}}"media-clip-start-change-request"(t){const{clipStartTime:e}=this.$state;e.set(t.detail)}"media-clip-end-change-request"(t){const{clipEndTime:e}=this.$state;e.set(t.detail),this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-duration-change-request"(t){const{providedDuration:e,clipEndTime:n}=this.$state;e.set(t.detail),n()<=0&&this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-audio-track-change-request"(t){const{logger:e,audioTracks:n}=r(this,Gt);if(n.readonly)return;const a=t.detail,l=n[a];if(l){const u=t.type;r(this,k).queue.enqueue(u,t),l.selected=!0}}async"media-enter-fullscreen-request"(t){try{await this.enterFullscreen(t.detail,t)}catch(e){o(this,v,ln).call(this,e,t)}}async"media-exit-fullscreen-request"(t){try{await this.exitFullscreen(t.detail,t)}catch(e){o(this,v,ln).call(this,e,t)}}async"media-orientation-lock-request"(t){const e=t.type;try{r(this,k).queue.enqueue(e,t),await r(this,Kt).lock(t.detail)}catch{r(this,k).queue.delete(e)}}async"media-orientation-unlock-request"(t){const e=t.type;try{r(this,k).queue.enqueue(e,t),await r(this,Kt).unlock()}catch{r(this,k).queue.delete(e)}}async"media-enter-pip-request"(t){try{await this.enterPictureInPicture(t)}catch(e){o(this,v,cn).call(this,e,t)}}async"media-exit-pip-request"(t){try{await this.exitPictureInPicture(t)}catch(e){o(this,v,cn).call(this,e,t)}}"media-live-edge-request"(t){const{live:e,liveEdge:n,canSeek:a}=this.$state;if(!(!e()||n()||!a())){r(this,k).queue.enqueue("media-seek-request",t);try{this.seekToLiveEdge()}catch{r(this,k).queue.delete("media-seek-request")}}}async"media-loop-request"(t){try{r(this,k).looping=!0,r(this,k).replaying=!0,await this.play(t)}catch{r(this,k).looping=!1}}"media-user-loop-change-request"(t){this.$state.userPrefersLoop.set(t.detail)}async"media-pause-request"(t){if(!this.$state.paused())try{await this.pause(t)}catch{}}async"media-play-request"(t){if(this.$state.paused())try{await this.play(t)}catch{}}"media-rate-change-request"(t){const{playbackRate:e,canSetPlaybackRate:n}=this.$state;if(e()===t.detail||!n())return;const a=r(this,V).call(this);a!=null&&a.setPlaybackRate&&(r(this,k).queue.enqueue("media-rate-change-request",t),a.setPlaybackRate(t.detail))}"media-audio-gain-change-request"(t){try{this.setAudioGain(t.detail,t)}catch{}}"media-quality-change-request"(t){var u,c;const{qualities:e,storage:n,logger:a}=r(this,Gt);if(e.readonly)return;r(this,k).queue.enqueue("media-quality-change-request",t);const l=t.detail;if(l<0)e.autoSelect(t),t.isOriginTrusted&&((u=n==null?void 0:n.setVideoQuality)==null||u.call(n,null));else{const p=e[l];p&&(p.selected=!0,t.isOriginTrusted&&((c=n==null?void 0:n.setVideoQuality)==null||c.call(n,{id:p.id,width:p.width,height:p.height,bitrate:p.bitrate})))}}"media-pause-controls-request"(t){const e=t.type;r(this,k).queue.enqueue(e,t),this.controls.pause(t)}"media-resume-controls-request"(t){const e=t.type;r(this,k).queue.enqueue(e,t),this.controls.resume(t)}"media-seek-request"(t){const{seekableStart:e,seekableEnd:n,ended:a,canSeek:l,live:u,userBehindLiveEdge:c,clipStartTime:p}=this.$state,f=t.detail;a()&&(r(this,k).replaying=!0);const y=t.type;r(this,k).seeking=!1,r(this,k).queue.delete(y);const w=f+p(),L=Math.floor(f)===Math.floor(e()),P=Math.floor(w)===Math.floor(n()),q=L?e():P?n():Math.min(Math.max(e()+.1,w),n()-.1);!Number.isFinite(q)||!l()||(r(this,k).queue.enqueue(y,t),r(this,V).call(this).setCurrentTime(q),u()&&t.isOriginTrusted&&Math.abs(n()-q)>=2&&c.set(!0))}"media-seeking-request"(t){const e=t.type;r(this,k).queue.enqueue(e,t),this.$state.seeking.set(!0),r(this,k).seeking=!0}"media-start-loading"(t){if(this.$state.canLoad())return;const e=t.type;r(this,k).queue.enqueue(e,t),r(this,Ut).handle(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;const e=t.type;r(this,k).queue.enqueue(e,t),r(this,Ut).handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){const{index:e,mode:n}=t.detail,a=r(this,Gt).textTracks[e];if(a){const l=t.type;r(this,k).queue.enqueue(l,t),a.setMode(n,t)}}"media-mute-request"(t){if(this.$state.muted())return;const e=t.type;r(this,k).queue.enqueue(e,t),r(this,V).call(this).setMuted(!0)}"media-unmute-request"(t){const{muted:e,volume:n}=this.$state;if(!e())return;const a=t.type;r(this,k).queue.enqueue(a,t),r(this,Gt).$provider().setMuted(!1),n()===0&&(r(this,k).queue.enqueue(a,t),r(this,V).call(this).setVolume(.25))}"media-volume-change-request"(t){const{muted:e,volume:n}=this.$state,a=t.detail;if(n()===a)return;const l=t.type;r(this,k).queue.enqueue(l,t),r(this,V).call(this).setVolume(a),a>0&&e()&&(r(this,k).queue.enqueue(l,t),r(this,V).call(this).setMuted(!1))}}Ut=new WeakMap,k=new WeakMap,Gt=new WeakMap,Pe=new WeakMap,Kt=new WeakMap,V=new WeakMap,re=new WeakMap,v=new WeakSet,eo=function(){const{load:t}=this.$props,{canLoad:e}=this.$state;if(t()!=="play"||e())return;const n=this.listen("media-play-request",a=>{o(this,v,rn).call(this,a),n()})},so=function(){const t=r(this,V).call(this),e=this.$state.canPlay();return t&&e&&r(this,re).start(),()=>{r(this,re).stop()}},io=function(t){t.stopPropagation(),!t.defaultPrevented&&this[t.type]&&(T(r(this,V))?this[t.type](t):r(this,re).enqueue(t.type,()=>{T(r(this,V))&&this[t.type](t)}))},rn=function(t){const{load:e}=this.$props,{canLoad:n}=this.$state;if(e()==="play"&&!n()){const a=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(a),r(this,re).enqueue("media-play-request",async()=>{try{await this.play(a)}catch{}}),!0}return!1},ts=new WeakMap,an=function(t){const e=T(r(this,V));return t==="prefer-media"&&r(this,Pe).supported||t==="media"?r(this,Pe):e==null?void 0:e.fullscreen},on=function(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")},no=function(){this.controls.defaultDelay=this.$props.controlsDelay()},ro=function(){var n,a;const{canSetAudioGain:t}=this.$state,e=!!((a=(n=r(this,V).call(this))==null?void 0:n.audioGain)!=null&&a.supported);t.set(e)},ao=function(){var n,a;const{canAirPlay:t}=this.$state,e=!!((a=(n=r(this,V).call(this))==null?void 0:n.airPlay)!=null&&a.supported);t.set(e)},oo=function(){const{canGoogleCast:t,source:e}=this.$state,n=$c&&!pa&&Vc(e());t.set(n)},lo=function(){var n,a;const{canFullscreen:t}=this.$state,e=r(this,Pe).supported||!!((a=(n=r(this,V).call(this))==null?void 0:n.fullscreen)!=null&&a.supported);t.set(e)},co=function(){var n,a;const{canPictureInPicture:t}=this.$state,e=!!((a=(n=r(this,V).call(this))==null?void 0:n.pictureInPicture)!=null&&a.supported);t.set(e)},qe=new WeakMap,uo=async function(t){const e=T(this.$props.fullscreenOrientation),n=t.detail;if(!(At(e)||e==="none"||!r(this,Kt).supported))if(n){if(r(this,Kt).locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else r(this,Kt).locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})},ln=function(t,e){r(this,Ut).handle(this.createEvent("fullscreen-error",{detail:Ci(t)}))},cn=function(t,e){r(this,Ut).handle(this.createEvent("picture-in-picture-error",{detail:Ci(t)}))},Nu=function(t,e,n){};function Ii(i,s){if(!(i&&s))throw Error("[vidstack] media not ready")}function $r(i,s){if(!(s!=null&&s.supported))throw Error("[vidstack] no fullscreen support")}class Fu{constructor(){g(this,"seeking",!1);g(this,"looping",!1);g(this,"replaying",!1);g(this,"queue",new Du)}}const Hu=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);var Z,C,R,Ce,es,Ae,Le,jt,ae,m,ho,po,Xt,F,fo,mo,yo,ii,un,hn,go,dn,bo,wo,ss,pn,ni,To,$o,ko,fn,mn,yn,vo,gn,Eo,is,So,bn;class Uu extends _e{constructor(t,e){super();d(this,m);d(this,Z);d(this,C);d(this,R,new Map);d(this,Ce,!1);d(this,es,[]);d(this,Ae,[-1,-1]);d(this,Le,!1);d(this,jt);d(this,ae,!1);d(this,ss,null);g(this,"seeking",ra(t=>{const{seeking:e,realCurrentTime:n,paused:a}=this.$state;e.set(!0),n.set(t.detail),o(this,m,F).call(this,"media-seeking-request",t),a()&&(h(this,jt,t),r(this,is).call(this)),h(this,Ae,[-1,-1])},150,{leading:!0}));d(this,is,aa(()=>{if(!r(this,jt))return;h(this,Le,!0);const{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);const n=this.createEvent("waiting",{trigger:r(this,jt)});r(this,R).set("waiting",n),this.dispatch(n),h(this,jt,void 0),h(this,Le,!1)},300));h(this,Z,t),h(this,C,e)}onAttach(t){t.setAttribute("aria-busy","true"),new ct(this).add("fullscreen-change",this["fullscreen-change"].bind(this)).add("fullscreen-error",this["fullscreen-error"].bind(this)).add("orientation-change",this["orientation-change"].bind(this))}onConnect(t){$(o(this,m,$o).bind(this)),o(this,m,fo).call(this),o(this,m,mo).call(this),o(this,m,yo).call(this),o(this,m,ho).call(this),et(o(this,m,po).bind(this))}onDestroy(){const{audioTracks:t,qualities:e,textTracks:n}=r(this,C);t[O.reset](),e[O.reset](),n[O.reset](),o(this,m,ni).call(this)}handle(t){if(!this.scope)return;const e=t.type;vs(()=>{var n;return(n=this[t.type])==null?void 0:n.call(this,t)}),Hu.has(e)&&r(this,R).set(e,t),this.dispatch(t)}"provider-change"(t){var a,l;const e=r(this,C).$provider(),n=t.detail;(e==null?void 0:e.type)!==(n==null?void 0:n.type)&&((a=e==null?void 0:e.destroy)==null||a.call(e),(l=e==null?void 0:e.scope)==null||l.dispose(),r(this,C).$provider.set(t.detail),e&&t.detail===null&&o(this,m,fn).call(this,t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),o(this,m,Xt).call(this)}"can-load"(t){this.$state.canLoad.set(!0),r(this,R).set("can-load",t),r(this,C).textTracks[E.canLoad](),o(this,m,F).call(this,"media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),r(this,R).set("can-load-poster",t),o(this,m,F).call(this,"media-poster-start-loading",t)}"media-type-change"(t){const e=r(this,R).get("source-change");e&&t.triggers.add(e);const n=this.$state.viewType();this.$state.mediaType.set(t.detail);const a=this.$state.providedViewType(),l=a==="unknown"?t.detail:a;n!==l&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:l,trigger:t}))})},0)}"stream-type-change"(t){const e=r(this,R).get("source-change");e&&t.triggers.add(e);const{streamType:n,inferredStreamType:a}=this.$state;a.set(t.detail),t.detail=n()}"rate-change"(t){var a;const{storage:e}=r(this,C),{canPlay:n}=this.$state;this.$state.playbackRate.set(t.detail),o(this,m,F).call(this,"media-rate-change-request",t),n()&&((a=e==null?void 0:e.setPlaybackRate)==null||a.call(e,t.detail))}"remote-playback-change"(t){const{remotePlaybackState:e,remotePlaybackType:n}=this.$state,{type:a,state:l}=t.detail,u=l==="connected";n.set(a),e.set(l);const c=a==="airplay"?"media-airplay-request":"media-google-cast-request";if(u)o(this,m,F).call(this,c,t);else{const p=r(this,Z).queue.peek(c);p&&(t.request=p,t.triggers.add(p))}}"sources-change"(t){const e=this.$state.sources(),n=t.detail;this.$state.sources.set(n),o(this,m,ko).call(this,e,n,t)}"source-change"(t){var n,a;t.isQualityChange=((n=t.originEvent)==null?void 0:n.type)==="quality-change";const e=t.detail;o(this,m,fn).call(this,t,t.isQualityChange),r(this,R).set(t.type,t),this.$state.source.set(e),(a=this.el)==null||a.setAttribute("aria-busy","true")}abort(t){const e=r(this,R).get("source-change");e&&t.triggers.add(e);const n=r(this,R).get("can-load");n&&!t.triggers.hasType("can-load")&&t.triggers.add(n)}"load-start"(t){const e=r(this,R).get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);const e=r(this,R).get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){const e=r(this,R).get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){const e=r(this,R).get("load-start");e&&t.triggers.add(e)}"can-play"(t){var n;const e=r(this,R).get("loaded-metadata");e&&t.triggers.add(e),o(this,m,mn).call(this,t.detail),(n=this.el)==null||n.setAttribute("aria-busy","false")}"can-play-through"(t){o(this,m,mn).call(this,t.detail);const e=r(this,R).get("can-play");e&&t.triggers.add(e)}"duration-change"(t){const{live:e,intrinsicDuration:n,providedDuration:a,clipEndTime:l,ended:u}=this.$state,c=t.detail;if(!e()){const p=Number.isNaN(c)?0:c;n.set(p),u()&&o(this,m,gn).call(this,t)}(a()>0||l()>0)&&t.stopImmediatePropagation()}progress(t){const{buffered:e,bufferedEnd:n,seekable:a,seekableEnd:l,live:u,intrinsicDuration:c}=this.$state,{buffered:p,seekable:f}=t.detail,y=ks(p)??1/0,w=p.length!==e().length,L=y>n(),P=ks(f)??1/0,q=f.length!==a().length,he=P>l();(w||L)&&e.set(p),(q||he)&&a.set(f),u()&&(c.set(P),this.dispatch("duration-change",{detail:P,trigger:t}))}play(t){const{paused:e,autoPlayError:n,ended:a,autoPlaying:l,playsInline:u,pointer:c,muted:p,viewType:f,live:y,userBehindLiveEdge:w}=this.$state;if(o(this,m,yn).call(this),!e()){t.stopImmediatePropagation();return}t.autoPlay=l();const L=r(this,R).get("waiting");L&&t.triggers.add(L),o(this,m,F).call(this,"media-play-request",t),r(this,R).set("play",t),e.set(!1),n.set(null),t.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:p()},trigger:t})),l.set(!1)),(a()||r(this,Z).replaying)&&(r(this,Z).replaying=!1,a.set(!1),this.handle(this.createEvent("replay",{trigger:t}))),!u()&&f()==="video"&&c()==="coarse"&&r(this,C).remote.enterFullscreen("prefer-media",t),y()&&!w()&&r(this,C).remote.seekToLiveEdge(t)}"play-fail"(t){const{muted:e,autoPlaying:n}=this.$state,a=r(this,R).get("play");a&&t.triggers.add(a),o(this,m,F).call(this,"media-play-request",t);const{paused:l,playing:u}=this.$state;l.set(!0),u.set(!1),o(this,m,Xt).call(this),r(this,R).set("play-fail",t),t.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),n.set(!1))}playing(t){const e=r(this,R).get("play"),n=r(this,R).get("seeked");e?t.triggers.add(e):n&&t.triggers.add(n),setTimeout(()=>o(this,m,Xt).call(this),0);const{paused:a,playing:l,live:u,liveSyncPosition:c,seekableEnd:p,started:f,currentTime:y,seeking:w,ended:L}=this.$state;if(a.set(!1),l.set(!0),w.set(!1),L.set(!1),r(this,Z).looping){r(this,Z).looping=!1;return}if(u()&&!f()&&y()===0){const P=c()??p()-2;Number.isFinite(P)&&r(this,C).$provider().setCurrentTime(P)}this.started(t)}started(t){const{started:e}=this.$state;e()||(e.set(!0),this.handle(this.createEvent("started",{trigger:t})))}pause(t){var l;(l=this.el)!=null&&l.isConnected||h(this,ae,!0),o(this,m,F).call(this,"media-pause-request",t);const e=r(this,R).get("seeked");e&&t.triggers.add(e);const{paused:n,playing:a}=this.$state;n.set(!0),a.set(!1),r(this,Ce)&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:t})),h(this,Ce,!1)},0),o(this,m,Xt).call(this)}"time-change"(t){if(r(this,Z).looping){t.stopImmediatePropagation();return}let{waiting:e,played:n,clipEndTime:a,realCurrentTime:l,currentTime:u}=this.$state,c=t.detail,p=a();l.set(c),o(this,m,vo).call(this),e.set(!1);for(const f of r(this,C).textTracks)f[E.updateActiveCues](c,t);p>0&&c>=p&&(h(this,Ce,!0),this.dispatch("media-pause-request",{trigger:t})),o(this,m,Eo).call(this),this.dispatch("time-update",{detail:{currentTime:u(),played:n()},trigger:t})}"audio-gain-change"(t){var l;const{storage:e}=r(this,C),{canPlay:n,audioGain:a}=this.$state;a.set(t.detail),o(this,m,F).call(this,"media-audio-gain-change-request",t),n()&&((l=e==null?void 0:e.setAudioGain)==null||l.call(e,a()))}"volume-change"(t){var c,p;const{storage:e}=r(this,C),{volume:n,muted:a,canPlay:l}=this.$state,u=t.detail;n.set(u.volume),a.set(u.muted||u.volume===0),o(this,m,F).call(this,"media-volume-change-request",t),o(this,m,F).call(this,u.muted?"media-mute-request":"media-unmute-request",t),l()&&((c=e==null?void 0:e.setVolume)==null||c.call(e,n()),(p=e==null?void 0:e.setMuted)==null||p.call(e,a()))}seeked(t){const{seeking:e,currentTime:n,realCurrentTime:a,paused:l,seekableEnd:u,ended:c}=this.$state;if(r(this,Z).seeking)e.set(!0),t.stopImmediatePropagation();else if(e()){const p=r(this,R).get("waiting");p&&t.triggers.add(p);const f=r(this,R).get("seeking");f&&!t.triggers.has(f)&&t.triggers.add(f),l()&&o(this,m,bn).call(this),e.set(!1),a.set(t.detail),o(this,m,F).call(this,"media-seek-request",t);const y=t==null?void 0:t.originEvent;y!=null&&y.isTrusted&&!(y instanceof MessageEvent)&&!/seek/.test(y.type)&&this.started(t)}Math.floor(n())!==Math.floor(u())?c.set(!1):this.end(t)}waiting(t){r(this,Le)||r(this,Z).seeking||(t.stopImmediatePropagation(),h(this,jt,t),r(this,is).call(this))}end(t){const{loop:e,ended:n}=this.$state;if(!(!e()&&n())){if(e()){setTimeout(()=>{requestAnimationFrame(()=>{o(this,m,yn).call(this,t),this.dispatch("media-loop-request",{trigger:t})})},10);return}setTimeout(()=>o(this,m,So).call(this,t),0)}}"fullscreen-change"(t){const e=t.detail;this.$state.fullscreen.set(e),o(this,m,F).call(this,e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){o(this,m,F).call(this,"media-enter-fullscreen-request",t),o(this,m,F).call(this,"media-exit-fullscreen-request",t)}"orientation-change"(t){const e=t.detail.lock;o(this,m,F).call(this,e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){const e=t.detail;this.$state.pictureInPicture.set(e),o(this,m,F).call(this,e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){o(this,m,F).call(this,"media-enter-pip-request",t),o(this,m,F).call(this,"media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}}Z=new WeakMap,C=new WeakMap,R=new WeakMap,Ce=new WeakMap,es=new WeakMap,Ae=new WeakMap,Le=new WeakMap,jt=new WeakMap,ae=new WeakMap,m=new WeakSet,ho=function(){r(this,ae)&&(requestAnimationFrame(()=>{this.scope&&r(this,C).remote.play(new N("dom-connect"))}),h(this,ae,!1))},po=function(){var t;r(this,ae)||(h(this,ae,!this.$state.paused()),(t=r(this,C).$provider())==null||t.pause())},Xt=function(){o(this,m,bn).call(this),h(this,Ce,!1),r(this,Z).replaying=!1,r(this,Z).looping=!1,h(this,Le,!1),h(this,jt,void 0),r(this,R).clear()},F=function(t,e){const n=r(this,Z).queue.serve(t);n&&(e.request=n,e.triggers.add(n))},fo=function(){o(this,m,ii).call(this),o(this,m,un).call(this);const t=r(this,C).textTracks;new ct(t).add("add",o(this,m,ii).bind(this)).add("remove",o(this,m,ii).bind(this)).add("mode-change",o(this,m,un).bind(this))},mo=function(){const t=r(this,C).qualities;new ct(t).add("add",o(this,m,dn).bind(this)).add("remove",o(this,m,dn).bind(this)).add("change",o(this,m,bo).bind(this)).add("auto-change",o(this,m,wo).bind(this)).add("readonly-change",o(this,m,To).bind(this))},yo=function(){const t=r(this,C).audioTracks;new ct(t).add("add",o(this,m,hn).bind(this)).add("remove",o(this,m,hn).bind(this)).add("change",o(this,m,go).bind(this))},ii=function(t){const{textTracks:e}=this.$state;e.set(r(this,C).textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})},un=function(t){t&&o(this,m,F).call(this,"media-text-track-change-request",t);const e=r(this,C).textTracks.selected,{textTrack:n}=this.$state;n()!==e&&(n.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))},hn=function(t){const{audioTracks:e}=this.$state;e.set(r(this,C).audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})},go=function(t){const{audioTrack:e}=this.$state;e.set(r(this,C).audioTracks.selected),t&&o(this,m,F).call(this,"media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})},dn=function(t){const{qualities:e}=this.$state;e.set(r(this,C).qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})},bo=function(t){const{quality:e}=this.$state;e.set(r(this,C).qualities.selected),t&&o(this,m,F).call(this,"media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})},wo=function(){const{qualities:t}=r(this,C),e=t.auto;this.$state.autoQuality.set(e),e||o(this,m,ni).call(this)},ss=new WeakMap,pn=function(){o(this,m,ni).call(this),h(this,ss,$(()=>{const{qualities:t}=r(this,C),{mediaWidth:e,mediaHeight:n}=this.$state,a=e(),l=n();if(a===0||l===0)return;let u=null,c=1/0;for(const p of t){const f=Math.abs(p.width-a)+Math.abs(p.height-l);f<c&&(c=f,u=p)}u&&t[O.select](u,!0,new N("resize",{detail:{width:a,height:l}}))}))},ni=function(){var t;(t=r(this,ss))==null||t.call(this),h(this,ss,null)},To=function(){this.$state.canSetQuality.set(!r(this,C).qualities.readonly)},$o=function(){const{canSetVolume:t,isGoogleCastConnected:e}=this.$state;if(e()){t.set(!1);return}Pc().then(t.set)},ko=function(t,e,n){let{qualities:a}=r(this,C),l=!1,u=!1;for(const c of t){if(!ji(c))continue;if(!e.some(f=>f.src===c.src)){const f=a.getBySrc(c.src);f&&(a[O.remove](f,n),u=!0)}}u&&!a.length&&(this.$state.savedState.set(null),a[O.reset](n));for(const c of e){if(!ji(c)||a.getBySrc(c.src))continue;const p={id:c.id??c.height+"p",bitrate:null,codec:null,...c,selected:!1};a[O.add](p,n),l=!0}l&&!a[gt.enableAuto]&&(o(this,m,pn).call(this),a[gt.enableAuto]=o(this,m,pn).bind(this),a[gt.setAuto](!0,n))},fn=function(t,e=!1){const{audioTracks:n,qualities:a}=r(this,C);if(!e){h(this,es,[]),h(this,Ae,[-1,-1]),n[O.reset](t),a[O.reset](t),br(this.$state,e),o(this,m,Xt).call(this);return}br(this.$state,e),o(this,m,Xt).call(this)},mn=function(t){const{seekable:e,buffered:n,intrinsicDuration:a,canPlay:l}=this.$state;l.set(!0),n.set(t.buffered),e.set(t.seekable);const u=ks(t.seekable)??1/0;a.set(u)},yn=function(t){if(!T(r(this,C).$provider))return;const{ended:n,seekableStart:a,clipStartTime:l,clipEndTime:u,currentTime:c,realCurrentTime:p,duration:f}=this.$state,y=n()||p()<l()||u()>0&&p()>=u()||Math.abs(c()-f())<.1;return y&&this.dispatch("media-seek-request",{detail:a(),trigger:t}),y},vo=function(){const{currentTime:t,played:e,paused:n}=this.$state;n()||(h(this,Ae,Fc(r(this,es),r(this,Ae),t())),e.set(new Zs(r(this,es))))},gn=function(t){const{clipStartTime:e,clipEndTime:n,duration:a}=this.$state;e()>0||n()>0||this.handle(this.createEvent("time-change",{detail:a(),trigger:t}))},Eo=function(){var a;const{storage:t}=r(this,C),{canPlay:e,realCurrentTime:n}=this.$state;e()&&((a=t==null?void 0:t.setTime)==null||a.call(t,n()))},is=new WeakMap,So=function(t){var c;const{storage:e}=r(this,C),{paused:n,seeking:a,ended:l,duration:u}=this.$state;o(this,m,gn).call(this,t),n()||this.dispatch("pause",{trigger:t}),a()&&this.dispatch("seeked",{detail:u(),trigger:t}),l.set(!0),o(this,m,Xt).call(this),(c=e==null?void 0:e.setTime)==null||c.call(e,u(),!0),this.dispatch("ended",{trigger:t})},bn=function(){r(this,is).cancel(),this.$state.waiting.set(!1)};var S,Po,qo,Ku,Co,Ao,Lo,Io,xo,Oo,Mo,_o,Ro,Do,Vo,No,Fo,Ho;class Gu extends _e{constructor(){super(...arguments);d(this,S)}onSetup(){o(this,S,Po).call(this);const t=[o(this,S,Co),o(this,S,Lo),o(this,S,Do),o(this,S,Vo),o(this,S,xo),o(this,S,Mo),o(this,S,_o),o(this,S,No),o(this,S,Ho),o(this,S,Fo),o(this,S,Io),o(this,S,Ro),o(this,S,Oo),o(this,S,qo),o(this,S,Ao)];for(const e of t)$(e.bind(this))}}S=new WeakSet,Po=function(){var n;const t={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(const a of Object.keys(this.$props))e.has(a)||(n=this.$state[t[a]??a])==null||n.set(this.$props[a]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)},qo=function(){const{viewType:t,streamType:e,title:n,poster:a,loop:l}=this.$props,u=this.$state;u.providedPoster.set(a()),u.providedStreamType.set(e()),u.providedViewType.set(t()),u.providedTitle.set(n()),u.providedLoop.set(l())},Ku=function(){},Co=function(){const{artist:t,artwork:e}=this.$props;this.$state.artist.set(t()),this.$state.artwork.set(e())},Ao=function(){const{title:t}=this.$state;this.dispatch("title-change",{detail:t()})},Lo=function(){const t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})},Io=function(){const t=this.$state.loop();this.dispatch("loop-change",{detail:t})},xo=function(){const t=this.$props.controls();this.$state.controls.set(t)},Oo=function(){const{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})},Mo=function(){const t=this.$props.crossOrigin()??this.$props.crossorigin(),e=t===!0?"":t;this.$state.crossOrigin.set(e)},_o=function(){const{duration:t}=this.$props;this.dispatch("media-duration-change-request",{detail:t()})},Ro=function(){const t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})},Do=function(){const{clipStartTime:t}=this.$props;this.dispatch("media-clip-start-change-request",{detail:t()})},Vo=function(){const{clipEndTime:t}=this.$props;this.dispatch("media-clip-end-change-request",{detail:t()})},No=function(){this.dispatch("live-change",{detail:this.$state.live()})},Fo=function(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())},Ho=function(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})};const kr=["play","pause","seekforward","seekbackward","seekto"];var Ot,Uo,Go,Ko,jo;class ju extends _e{constructor(){super(...arguments);d(this,Ot)}onConnect(){$(o(this,Ot,Go).bind(this)),$(o(this,Ot,Ko).bind(this));const t=o(this,Ot,jo).bind(this);for(const e of kr)navigator.mediaSession.setActionHandler(e,t);et(o(this,Ot,Uo).bind(this))}}Ot=new WeakSet,Uo=function(){for(const t of kr)navigator.mediaSession.setActionHandler(t,null)},Go=function(){const{title:t,artist:e,artwork:n,poster:a}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:e(),artwork:n()??[{src:a()}]})},Ko=function(){const{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"},jo=function(t){const e=new N("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:Ss(t.seekTime)?t.seekTime:this.$state.currentTime()+(t.seekOffset??(t.action==="seekforward"?10:-10)),trigger:e});break}};var W,Ie,Y,b,rt,ri,ns,Qo,Bo,Wo,Yo,zo,bs,wn,Xo,Tn,Jo,$n,Zo,kn,tl,vn,el,En,sl,il,nl,rl;const pe=class pe extends Un{constructor(){super();d(this,b);d(this,W);d(this,Ie);d(this,Y);g(this,"canPlayQueue",new to);g(this,"remoteControl");d(this,ns,!1);g(this,"orientation");new Gu;const t={player:this,qualities:new $u,audioTracks:new Tu,storage:null,$provider:tt(null),$providerSetup:tt(!1),$props:this.$props,$state:this.$state};t.remote=this.remoteControl=new fu(void 0),t.remote.setPlayer(this),t.textTracks=new wu,t.textTracks[E.crossOrigin]=this.$state.crossOrigin,t.textRenderers=new bu(t),t.ariaKeys={},h(this,W,t),zr(ha,t),this.orientation=new ui,new hu,new qu(t);const e=new Fu;h(this,Ie,new Uu(e,t)),h(this,Y,new Vu(r(this,Ie),e,t)),t.delegate=new Ru(r(this,Ie).handle.bind(r(this,Ie)),t),t.notify=t.delegate.notify.bind(t.delegate),typeof navigator<"u"&&"mediaSession"in navigator&&new ju,new Tr("load",this.startLoading.bind(this)),new Tr("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){o(this,b,Yo).call(this),$(o(this,b,Wo).bind(this)),$(o(this,b,Jo).bind(this)),$(o(this,b,Xo).bind(this)),$(o(this,b,tl).bind(this)),$(o(this,b,Zo).bind(this)),$(o(this,b,sl).bind(this)),$(o(this,b,el).bind(this))}onAttach(t){t.setAttribute("data-media-player",""),mr(t,"tabindex","0"),mr(t,"role","region"),$(o(this,b,nl).bind(this)),$(o(this,b,Qo).bind(this)),$(o(this,b,Bo).bind(this)),us(t,"find-media-player",o(this,b,zo).bind(this))}onConnect(t){fa&&X(t,"data-iphone","");const e=window.matchMedia("(pointer: coarse)");o(this,b,wn).call(this,e),e.onchange=o(this,b,wn).bind(this);const n=new ResizeObserver(na(o(this,b,bs).bind(this)));n.observe(t),$(o(this,b,bs).bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),et(()=>{n.disconnect(),e.onchange=null})}onDestroy(){r(this,W).player=null,this.canPlayQueue.reset()}get provider(){return r(this,b,rt)}get controls(){return r(this,Y).controls}set controls(t){r(this,b,ri).controls.set(t)}get title(){return T(this.$state.title)}set title(t){if(r(this,ns)){h(this,ns,!1);return}r(this,b,ri).title.set(t)}get qualities(){return r(this,W).qualities}get audioTracks(){return r(this,W).audioTracks}get textTracks(){return r(this,W).textTracks}get textRenderers(){return r(this,W).textRenderers}get duration(){return this.$state.duration()}set duration(t){r(this,b,ri).duration.set(t)}get paused(){return T(this.$state.paused)}set paused(t){o(this,b,Tn).call(this,t)}get muted(){return T(this.$state.muted)}set muted(t){o(this,b,$n).call(this,t)}get currentTime(){return T(this.$state.currentTime)}set currentTime(t){o(this,b,kn).call(this,t)}get volume(){return T(this.$state.volume)}set volume(t){o(this,b,vn).call(this,t)}get playbackRate(){return T(this.$state.playbackRate)}set playbackRate(t){o(this,b,En).call(this,t)}async play(t){return r(this,Y).play(t)}async pause(t){return r(this,Y).pause(t)}async enterFullscreen(t,e){return r(this,Y).enterFullscreen(t,e)}async exitFullscreen(t,e){return r(this,Y).exitFullscreen(t,e)}enterPictureInPicture(t){return r(this,Y).enterPictureInPicture(t)}exitPictureInPicture(t){return r(this,Y).exitPictureInPicture(t)}seekToLiveEdge(t){r(this,Y).seekToLiveEdge(t)}startLoading(t){r(this,W).notify("can-load",void 0,t)}startLoadingPoster(t){r(this,W).notify("can-load-poster",void 0,t)}requestAirPlay(t){return r(this,Y).requestAirPlay(t)}requestGoogleCast(t){return r(this,Y).requestGoogleCast(t)}setAudioGain(t,e){return r(this,Y).setAudioGain(t,e)}destroy(){super.destroy(),r(this,W).remote.setPlayer(null),this.dispatch("destroy")}};W=new WeakMap,Ie=new WeakMap,Y=new WeakMap,b=new WeakSet,rt=function(){return r(this,W).$provider()},ri=function(){return this.$props},ns=new WeakMap,Qo=function(){const t=this.$el,{title:e,live:n,viewType:a,providedTitle:l}=this.$state,u=n(),c=ic(a()),p=c!=="Unknown"?`${u?"Live ":""}${c}`:u?"Live":"Media",f=e();X(this.el,"aria-label",`${p} Player`+(f?` - ${f}`:"")),t!=null&&t.hasAttribute("title")&&(h(this,ns,!0),t==null||t.removeAttribute("title"))},Bo=function(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),X(this.el,"data-orientation",t),o(this,b,bs).call(this)},Wo=function(){this.$state.canPlay()&&r(this,b,rt)?this.canPlayQueue.start():this.canPlayQueue.stop()},Yo=function(){if(pe[Li]){this.setAttributes(pe[Li]);return}const t={"data-load":function(){return this.$props.load()},"data-captions":function(){const n=this.$state.textTrack();return!!n&&kt(n)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canLoad:n,canPlay:a,waiting:l}=this.$state;return n()&&(!a()||l())},"data-error":function(){const{error:n}=this.$state;return!!n()},"data-autoplay-error":function(){const{autoPlayError:n}=this.$state;return!!n()}},e={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(const n of Mu){const a="data-"+(e[n]??ia(n));t[a]=function(){return this.$state[n]()}}delete t.title,pe[Li]=t,this.setAttributes(t)},zo=function(t){t.detail(this)},bs=function(){if(!this.el)return;const t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),hs(this.el,"--player-width",t+"px"),hs(this.el,"--player-height",e+"px")},wn=function(t){const e=t.matches?"coarse":"fine";X(this.el,"data-pointer",e),this.$state.pointer.set(e),o(this,b,bs).call(this)},Xo=function(){o(this,b,Tn).call(this,this.$props.paused())},Tn=function(t){t?this.canPlayQueue.enqueue("paused",()=>r(this,Y).pause()):this.canPlayQueue.enqueue("paused",()=>r(this,Y).play())},Jo=function(){o(this,b,$n).call(this,this.$props.muted())},$n=function(t){this.canPlayQueue.enqueue("muted",()=>{r(this,b,rt)&&r(this,b,rt).setMuted(t)})},Zo=function(){o(this,b,kn).call(this,this.$props.currentTime())},kn=function(t){this.canPlayQueue.enqueue("currentTime",()=>{const{currentTime:e,clipStartTime:n,seekableStart:a,seekableEnd:l}=this.$state;t!==T(e)&&T(()=>{if(!r(this,b,rt))return;const u=t+n(),c=Math.floor(t)===Math.floor(a()),p=Math.floor(u)===Math.floor(l()),f=c?a():p?l():Math.min(Math.max(a()+.1,u),l()-.1);Number.isFinite(f)&&r(this,b,rt).setCurrentTime(f)})})},tl=function(){o(this,b,vn).call(this,this.$props.volume())},vn=function(t){const e=uu(0,t,1);this.canPlayQueue.enqueue("volume",()=>{r(this,b,rt)&&r(this,b,rt).setVolume(e)})},el=function(){o(this,b,En).call(this,this.$props.playbackRate())},En=function(t){this.canPlayQueue.enqueue("rate",()=>{var e,n;r(this,b,rt)&&((n=(e=r(this,b,rt)).setPlaybackRate)==null||n.call(e,t))})},sl=function(){o(this,b,il).call(this,this.$props.playsInline())},il=function(t){this.canPlayQueue.enqueue("playsinline",()=>{var e,n;r(this,b,rt)&&((n=(e=r(this,b,rt)).setPlaysInline)==null||n.call(e,t))})},nl=function(){var n;let t=this.$props.storage(),e=_(t)?new yu:t;if(e!=null&&e.onChange){const{source:a}=this.$state,l=_(t)?t:(n=this.el)==null?void 0:n.id,u=Ps(o(this,b,rl).bind(this));$(()=>e.onChange(a(),u(),l||void 0))}r(this,W).storage=e,r(this,W).textTracks.setStorage(e),et(()=>{var a;(a=e==null?void 0:e.onDestroy)==null||a.call(e),r(this,W).storage=null,r(this,W).textTracks.setStorage(null)})},rl=function(){const{clipStartTime:t,clipEndTime:e}=this.$props,{source:n}=this.$state,a=n();return a.src?`${a.src}:${t()}:${e()}`:null},g(pe,"props",_u),g(pe,"state",Ca);let hi=pe;const D=hi.prototype;J(D,"canPlayQueue");J(D,"remoteControl");J(D,"provider");J(D,"controls");J(D,"orientation");J(D,"title");J(D,"qualities");J(D,"audioTracks");J(D,"textTracks");J(D,"textRenderers");J(D,"duration");J(D,"paused");J(D,"muted");J(D,"currentTime");J(D,"volume");J(D,"playbackRate");dt(D,"play");dt(D,"pause");dt(D,"enterFullscreen");dt(D,"exitFullscreen");dt(D,"enterPictureInPicture");dt(D,"exitPictureInPicture");dt(D,"seekToLiveEdge");dt(D,"startLoading");dt(D,"startLoadingPoster");dt(D,"requestAirPlay");dt(D,"requestGoogleCast");dt(D,"setAudioGain");function Qu(i,s){return fetch(i,s).then(t=>t.text()).then(t=>/type="static"/.test(t)?"on-demand":"live")}function al(i,s){return fetch(i,s).then(t=>t.text()).then(t=>{const e=Bu(t);if(e)return al(/^https?:/.test(e)?e:new URL(e,i).href,s);const n=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(t)?"on-demand":"live";return n==="live"&&Wu(t)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(t)||t.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":n})}function Bu(i){const s=i.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return s?s[0].split(`
`)[1].trim():null}function Wu(i){const s=i.split(`
`);for(const t of s)if(t.startsWith("#EXT-X-TARGETDURATION")){const e=parseFloat(t.split(":")[1]);if(!isNaN(e))return e}return-1}const Sn=new Map;var rs,as,Vs,A,Qt,j,ol,ll,Pn,qn,Cn,cl,ul,hl;class Yu{constructor(s,t,e,n=[]){d(this,j);d(this,rs,!1);d(this,as);d(this,Vs);d(this,A);d(this,Qt);h(this,Vs,s),h(this,A,t),h(this,Qt,e);const a=new en,l=new tn,u=new jn,c=new Iu,p=new Ou,f=new xu,y=[p,f];h(this,as,Ps(()=>{const L=t.$state.remotePlaybackLoader(),P=t.$props.preferNativeHLS()?[u,c,a,l,...y,...n]:[l,u,c,a,...y,...n];return L?[L,...P]:P}));const{$state:w}=t;w.sources.set(vr(t.$props.src()));for(const L of w.sources()){const P=r(this,as).call(this).find(he=>he.canPlay(L));if(!P)continue;const q=P.mediaType(L);t.$state.source.set(L),t.$state.mediaType.set(q),t.$state.inferredViewType.set(q),r(this,Qt).set(P),h(this,rs,!0);break}}connect(){const s=r(this,Qt).call(this);r(this,rs)&&(o(this,j,qn).call(this,r(this,A).$state.source(),s),o(this,j,Cn).call(this,s),h(this,rs,!1)),$(o(this,j,ol).bind(this)),$(o(this,j,ll).bind(this)),$(o(this,j,cl).bind(this)),$(o(this,j,ul).bind(this)),$(o(this,j,hl).bind(this))}}rs=new WeakMap,as=new WeakMap,Vs=new WeakMap,A=new WeakMap,Qt=new WeakMap,j=new WeakSet,ol=function(){r(this,A).notify("sources-change",[...vr(r(this,A).$props.src()),...r(this,Vs).call(this)])},ll=function(){var l;const{$state:s}=r(this,A),t=s.sources(),e=T(s.source),n=o(this,j,Pn).call(this,e,t);if(((l=t[0])==null?void 0:l.src)&&!n.src&&!n.type){const{crossOrigin:u}=s,c=ti(u()),p=new AbortController;return Promise.all(t.map(f=>_(f.src)&&f.type==="?"?fetch(f.src,{method:"HEAD",credentials:c,signal:p.signal}).then(y=>(f.type=y.headers.get("content-type")||"??",Sn.set(f.src,f.type),f)).catch(()=>f):f)).then(f=>{if(p.signal.aborted)return;const y=o(this,j,Pn).call(this,T(s.source),f);Es(),y.src||r(this,A).notify("error",{message:"Failed to load resource.",code:4})}),()=>p.abort()}Es()},Pn=function(s,t){let e={src:"",type:""},n=null,a=new N("sources-change",{detail:{sources:t}}),l=r(this,as).call(this),{started:u,paused:c,currentTime:p,quality:f,savedState:y}=r(this,A).$state;for(const w of t){const L=l.find(P=>P.canPlay(w));if(L){e=w,n=L;break}}if(ji(e)){const w=f(),L=t.find(P=>P.src===(w==null?void 0:w.src));T(u)?y.set({paused:T(c),currentTime:T(p)}):y.set(null),L&&(e=L,a=new N("quality-change",{detail:{quality:w}}))}return Sr(s,e)||o(this,j,qn).call(this,e,n,a),n!==T(r(this,Qt))&&o(this,j,Cn).call(this,n,a),e},qn=function(s,t,e){r(this,A).notify("source-change",s,e),r(this,A).notify("media-type-change",(t==null?void 0:t.mediaType(s))||"unknown",e)},Cn=function(s,t){r(this,A).$providerSetup.set(!1),r(this,A).notify("provider-change",null,t),s&&T(()=>{var e;return(e=s.preconnect)==null?void 0:e.call(s,r(this,A))}),r(this,Qt).set(s),r(this,A).notify("provider-loader-change",s,t)},cl=function(){const s=r(this,A).$provider();if(!(!s||T(r(this,A).$providerSetup))){if(r(this,A).$state.canLoad()){Ct(()=>s.setup(),s.scope),r(this,A).$providerSetup.set(!0);return}T(()=>{var t;return(t=s.preconnect)==null?void 0:t.call(s)})}},ul=function(){if(!r(this,A).$providerSetup())return;const s=r(this,A).$provider(),t=r(this,A).$state.source(),e=T(r(this,A).$state.crossOrigin),n=T(r(this,A).$props.preferNativeHLS);if(!Sr(s==null?void 0:s.currentSrc,t)){if(r(this,A).$state.canLoad()){const a=new AbortController;return Qs(t)?(n||!Gn())&&al(t.src,{credentials:ti(e),signal:a.signal}).then(l=>{r(this,A).notify("stream-type-change",l)}).catch(li):Kn(t)?Qu(t.src,{credentials:ti(e),signal:a.signal}).then(l=>{r(this,A).notify("stream-type-change",l)}).catch(li):r(this,A).notify("stream-type-change","on-demand"),T(()=>{const l=T(r(this,A).$state.preload);return s==null?void 0:s.loadSource(t,l).catch(u=>{})}),()=>a.abort()}try{_(t.src)&&Ti(new URL(t.src).origin)}catch{}}},hl=function(){const s=r(this,Qt).call(this),{providedPoster:t,source:e,canLoadPoster:n}=r(this,A).$state;if(!s||!s.loadPoster||!e()||!n()||t())return;const a=new AbortController,l=new N("source-change",{detail:e});return s.loadPoster(e(),r(this,A),a).then(u=>{r(this,A).notify("poster-change",u||"",l)}).catch(()=>{r(this,A).notify("poster-change","",l)}),()=>{a.abort()}};function vr(i){return($t(i)?i:[i]).map(s=>_(s)?{src:s,type:Er(s)}:{...s,type:Er(s.src,s.type)})}function Er(i,s){return _(s)&&s.length?s:_(i)&&Sn.has(i)?Sn.get(i):!s&&Qs({src:i,type:""})?"application/x-mpegurl":!s&&Kn({src:i,type:""})?"application/dash+xml":!_(i)||i.startsWith("blob:")?"video/object":i.includes("youtube")||i.includes("youtu.be")?"video/youtube":i.includes("vimeo")&&!i.includes("progressive_redirect")&&!i.includes(".m3u8")?"video/vimeo":"?"}function Sr(i,s){return(i==null?void 0:i.src)===(s==null?void 0:s.src)&&(i==null?void 0:i.type)===(s==null?void 0:s.type)}var Ns,oe,Fs,bi,dl;class zu{constructor(s,t){d(this,bi);d(this,Ns);d(this,oe);d(this,Fs,[]);h(this,Ns,s),h(this,oe,t),$(o(this,bi,dl).bind(this))}}Ns=new WeakMap,oe=new WeakMap,Fs=new WeakMap,bi=new WeakSet,dl=function(){const s=r(this,Ns).call(this);for(const t of r(this,Fs))if(!s.some(e=>e.id===t.id)){const e=t.id&&r(this,oe).textTracks.getById(t.id);e&&r(this,oe).textTracks.remove(e)}for(const t of s){const e=t.id||ci.createId(t);r(this,oe).textTracks.getById(e)||(t.id=e,r(this,oe).textTracks.add(t))}h(this,Fs,s)};var Tt,Hs,Us,Gs,os,ls,ht,pl,An,Ln,In;class di extends Un{constructor(){super(...arguments);d(this,ht);d(this,Tt);d(this,Hs);d(this,Us,tt([]));d(this,Gs,tt([]));d(this,os,null);d(this,ls,-1)}onSetup(){h(this,Tt,da()),h(this,Hs,new Yu(r(this,Us),r(this,Tt),this.$state.loader,this.$props.loaders()))}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){r(this,Hs).connect(),new zu(r(this,Gs),r(this,Tt));const e=new ResizeObserver(na(o(this,ht,Ln).bind(this)));e.observe(t);const n=new MutationObserver(o(this,ht,In).bind(this));n.observe(t,{attributes:!0,childList:!0}),o(this,ht,Ln).call(this),o(this,ht,In).call(this),et(()=>{e.disconnect(),n.disconnect()})}load(t){t==null||t.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(r(this,ls)),h(this,ls,requestAnimationFrame(()=>o(this,ht,pl).call(this,t))),et(()=>{window.cancelAnimationFrame(r(this,ls))})}onDestroy(){h(this,os,null),o(this,ht,An).call(this)}}Tt=new WeakMap,Hs=new WeakMap,Us=new WeakMap,Gs=new WeakMap,os=new WeakMap,ls=new WeakMap,ht=new WeakSet,pl=function(t){if(!this.scope)return;const e=this.$state.loader(),{$provider:n}=r(this,Tt);r(this,os)===e&&(e==null?void 0:e.target)===t&&T(n)||(o(this,ht,An).call(this),h(this,os,e),e&&(e.target=t||null),!(!e||!t)&&e.load(r(this,Tt)).then(a=>{this.scope&&T(this.$state.loader)===e&&r(this,Tt).notify("provider-change",a)}))},An=function(){var t;(t=r(this,Tt))==null||t.notify("provider-change",null)},Ln=function(){if(!this.el)return;const{player:t,$state:e}=r(this,Tt),n=this.el.offsetWidth,a=this.el.offsetHeight;t&&(e.mediaWidth.set(n),e.mediaHeight.set(a),t.el&&(hs(t.el,"--media-width",n+"px"),hs(t.el,"--media-height",a+"px")))},In=function(){const t=[],e=[],n=this.el.children;for(const a of n)if(!a.hasAttribute("data-vds")){if(a instanceof HTMLSourceElement){const l={id:a.id,src:a.src,type:a.type};for(const u of["id","src","width","height","bitrate","codec"]){const c=a.getAttribute(`data-${u}`);_(c)&&(l[u]=/id|src|codec/.test(u)?c:Number(c))}t.push(l)}else if(a instanceof HTMLTrackElement){const l={src:a.src,kind:a.track.kind,language:a.srclang,label:a.label,default:a.default,type:a.getAttribute("data-type")};e.push({id:a.id||ci.createId(l),...l})}}r(this,Us).set(t),r(this,Gs).set(e),Es()},g(di,"props",{loaders:[]}),g(di,"state",new sa({loader:null}));const Xu=di.prototype;dt(Xu,"load");var Bt,z,st,Mt,ml,yl,gl,bl;class fl extends la(HTMLElement,di){constructor(){super(...arguments);d(this,Mt);d(this,Bt);d(this,z,null);d(this,st,null)}onSetup(){h(this,Bt,da()),this.setAttribute("keep-alive","")}onDestroy(){var t,e;(t=r(this,st))==null||t.remove(),h(this,st,null),(e=r(this,z))==null||e.remove(),h(this,z,null)}onConnect(){$(()=>{var c,p,f;const t=this.$state.loader(),e=(t==null?void 0:t.name)==="youtube",n=(t==null?void 0:t.name)==="vimeo",a=e||n,l=(t==null?void 0:t.name)==="google-cast",u=t?l?o(this,Mt,bl).call(this):a?o(this,Mt,gl).call(this):t.mediaType()==="audio"?o(this,Mt,ml).call(this):o(this,Mt,yl).call(this):null;if(r(this,z)!==u){const y=((c=r(this,z))==null?void 0:c.parentElement)??this;(p=r(this,z))==null||p.remove(),h(this,z,u),u&&y.prepend(u),a&&u&&$(()=>{var Bs;const{nativeControls:w,viewType:L}=r(this,Bt).$state,P=w(),q=L()==="audio";!P&&!q?(h(this,st,this.querySelector(".vds-blocker")),r(this,st)||(h(this,st,document.createElement("div")),r(this,st).classList.add("vds-blocker"),u.after(r(this,st)))):((Bs=r(this,st))==null||Bs.remove(),h(this,st,null)),X(u,"data-no-controls",!P)})}e?u==null||u.classList.add("vds-youtube"):n&&(u==null||u.classList.add("vds-vimeo")),a||((f=r(this,st))==null||f.remove(),h(this,st,null)),this.load(u)})}}Bt=new WeakMap,z=new WeakMap,st=new WeakMap,Mt=new WeakSet,ml=function(){const t=r(this,z)instanceof HTMLAudioElement?r(this,z):document.createElement("audio"),{controls:e,crossOrigin:n}=r(this,Bt).$state;return $(()=>{X(t,"controls",e()),X(t,"crossorigin",n())}),t},yl=function(){const t=r(this,z)instanceof HTMLVideoElement?r(this,z):document.createElement("video"),{crossOrigin:e,poster:n,nativeControls:a}=r(this,Bt).$state,l=Ps(()=>a()?"true":null),u=Ps(()=>n()&&a()?n():null);return $(()=>{X(t,"controls",l()),X(t,"crossorigin",e()),X(t,"poster",u())}),t},gl=function(){const t=r(this,z)instanceof HTMLIFrameElement?r(this,z):document.createElement("iframe"),{nativeControls:e}=r(this,Bt).$state;return $(()=>X(t,"tabindex",e()?null:-1)),t},bl=function(){var e;if((e=r(this,z))!=null&&e.classList.contains("vds-google-cast"))return r(this,z);const t=document.createElement("div");return t.classList.add("vds-google-cast"),mt(async()=>{const{insertContent:n}=await import("./vidstack-DJTshtlu.CbiAE5_D.js");return{insertContent:n}},[],import.meta.url).then(({insertContent:n})=>{n(t,r(this,Bt).$state)}),t},g(fl,"tagName","media-provider");class xn extends la(HTMLElement,hi){}g(xn,"tagName","media-player"),g(xn,"attrs",{autoPlay:"autoplay",crossOrigin:"crossorigin",playsInline:"playsinline",preferNativeHLS:"prefer-native-hls",minLiveDVRWindow:"min-live-dvr-window"});ua(xn);ua(fl);function Th(i){try{const s=new URL(i).hostname.split(".").slice(-2).join(".");if(s==="youtube.com")return{provider:"youtube",src:i.split("v=")[1].split("&")[0]};if(s==="youtu.be")return{provider:"youtube",src:i.split("youtu.be/")[1].split("?")[0]};if(s==="vimeo.com")return{provider:"vimeo",src:i.split("vimeo.com/")[1].split("?")[0]};if(s==="dailymotion.com")return{provider:"dailymotion",src:i.split("video/")[1].split("?")[0]};if(i.endsWith(".m3u8"))return{provider:"hls",src:i}}catch{}return{provider:"video",src:i}}function Pr(i){return typeof i=="string"?i:(((i==null?void 0:i.provider)==="youtube"||(i==null?void 0:i.provider)==="vimeo")&&(i.src=`${i.provider}/${i==null?void 0:i.src}`),i.src)}function qr(i){let s,t,e,n,a,l,u;return{c(){s=vi("div"),t=vi("media-player"),e=vi("media-provider"),this.h()},l(c){s=Ei(c,"DIV",{class:!0});var p=Si(s);t=Ei(p,"MEDIA-PLAYER",{class:!0,src:!0,playsInline:!0,loop:!0,"key-disabled":!0});var f=Si(t);e=Ei(f,"MEDIA-PROVIDER",{}),Si(e).forEach(ms),f.forEach(ms),p.forEach(ms),this.h()},h(){de(t,"class","w-full svelte-1ev11c1"),rr(t.src,n=i[0].src)||de(t,"src",n),de(t,"playsInline",""),de(t,"loop",a=!i[0].isScheduled),de(t,"key-disabled",""),Al(s,"class","flex items-center justify-center h-full w-full pointer-events-none")},m(c,p){Vr(c,s,p),ar(s,t),ar(t,e),i[6](t),l||(u=[or(t,"can-play",i[2]),or(t,"ended",i[3])],l=!0)},p(c,p){p&1&&!rr(t.src,n=c[0].src)&&de(t,"src",n),p&1&&a!==(a=!c[0].isScheduled)&&de(t,"loop",a)},d(c){c&&ms(s),i[6](null),l=!1,Ll(u)}}}function Ju(i){let s,t=i[0].parsed&&qr(i);return{c(){t&&t.c(),s=ir()},l(e){t&&t.l(e),s=ir()},m(e,n){t&&t.m(e,n),Vr(e,s,n)},p(e,[n]){e[0].parsed?t?t.p(e,n):(t=qr(e),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},i:nr,o:nr,d(e){e&&ms(s),t&&t.d(e)}}}function Zu(i,s,t){let e;ql(i,Ml,y=>t(5,e=y));let{props:n={}}=s,a,l;Cl(()=>{l&&clearTimeout(l),a==null||a.destroy()});function u(){a.play(),l=setTimeout(()=>{t(4,p=e.volume*2*lr(n.volume,1)/100),t(1,a.volume=p,a),t(1,a.muted=e.isMuting||p===0,a)},0)}function c(){console.debug("signaling end"),n.scheduleSignaler&&n.scheduleSignaler()}let p=0;function f(y){Il[y?"unshift":"push"](()=>{a=y,t(1,a),t(5,e),t(0,n),t(4,p)})}return i.$$set=y=>{"props"in y&&t(0,n=y.props)},i.$$.update=()=>{i.$$.dirty&1&&(typeof n=="string"?t(0,n={parsed:!0,src:Pr(n)}):(t(0,n.src=Pr(n),n),t(0,n.parsed=!0,n))),i.$$.dirty&51&&(t(4,p=e.volume*2*lr(n.volume,1)/100),a&&(t(1,a.volume=p,a),t(1,a.muted=e.isMuting||p===0,a)))},[n,a,u,c,p,e,f]}class $h extends xl{constructor(s){super(),Ol(this,s,Zu,Ju,Pl,{props:0})}}export{Zs as A,_i as B,$t as C,N as D,ct as E,mh as F,oh as G,lh as H,uh as I,ch as J,vs as K,O as L,X as M,fh as N,hh as O,pa as P,gt as Q,Qs as R,ah as S,ci as T,wh as U,$h as V,Vc as W,Th as X,gh as a,_ as b,bh as c,T as d,$ as e,E as f,$c as g,At as h,Gn as i,Ci as j,yh as k,us as l,le as m,ia as n,Ac as o,Ti as p,Ec as q,vc as r,Ct as s,Ss as t,ph as u,dh as v,Sc as w,et as x,Oi as y,tt as z};
